<!DOCTYPE html>
<html lang="en">
  <head>

      <!-- Title -->
      
      <title>Nodejs Async 学习 | 荆文征</title>

    <!-- Required Meta Tags Always Come First -->
    <meta charset="utf-8">
    <meta name="referrer" content="no-referrer" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico">

    <!-- Google Fonts -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Slab:300,400,700%7COpen+Sans:400,600,700">

    <!-- CSS Global Compulsory -->
    <link rel="stylesheet" href="/assets/vendor/bootstrap/bootstrap.min.css">

    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="/assets/vendor/icon-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/vendor/icon-line-pro/style.css">
    <link rel="stylesheet" href="/assets/vendor/icon-hs/style.css">
    <link rel="stylesheet" href="/assets/vendor/animate.css">
    <link rel="stylesheet" href="/assets/vendor/hs-megamenu/src/hs.megamenu.css">
    <link rel="stylesheet" href="/assets/vendor/hamburgers/hamburgers.min.css">
    <link rel="stylesheet" href="/assets/vendor/slick-carousel/slick/slick.css">
    <link rel="stylesheet" href="/assets/vendor/fancybox/jquery.fancybox.css">

    <!-- Revolution Slider -->
    <link rel="stylesheet" href="/assets/vendor/revolution-slider/revolution/fonts/pe-icon-7-stroke/css/pe-icon-7-stroke.css">
    <link rel="stylesheet" href="/assets/vendor/revolution-slider/revolution/css/settings.css">
    <link rel="stylesheet" href="/revolution-slider/carousel-gallery/assets/css/style.css">

    <!-- CSS Unify Theme -->
    <link rel="stylesheet" href="/assets/css/styles.bm-classic.css">

    <!-- CSS Customization -->
    <link rel="stylesheet" href="/assets/css/custom.css">

    <!-- CSS Implementing Plugins -->
    <link  rel="stylesheet" href="/assets/vendor/fancybox/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/css/prism-atom-dark.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<!-- JS Global Compulsory -->
<script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/jquery-migrate/jquery-migrate.min.js"></script>
<script src="/assets/vendor/popper.js/index.js"></script>
<script src="/assets/vendor/bootstrap/bootstrap.min.js"></script>

<!-- JS Implementing Plugins -->
<script src="/assets/vendor/appear.js"></script>
<script src="/assets/vendor/slick-carousel/slick/slick.js"></script>
<script src="/assets/vendor/hs-megamenu/src/hs.megamenu.js"></script>
<script src="/assets/vendor/fancybox/jquery.fancybox.min.js"></script>

<!-- JS Unify -->
<script src="/assets/js/hs.core.js"></script>
<script src="/assets/js/components/hs.header.js"></script>
<script src="/assets/js/helpers/hs.hamburgers.js"></script>
<script src="/assets/js/components/hs.dropdown.js"></script>
<script src="/assets/js/components/hs.carousel.js"></script>
<script src="/assets/js/components/hs.go-to.js"></script>
<script src="/assets/js/components/hs.popup.js"></script>

<!-- JS Revolution Slider -->
<script src="/assets/vendor/revolution-slider/revolution/js/jquery.themepunch.tools.min.js"></script>
<script src="/assets/vendor/revolution-slider/revolution/js/jquery.themepunch.revolution.min.js"></script>

<script src="/assets/vendor/revolution-slider/revolution/js/extensions/revolution.extension.actions.min.js"></script>
<script src="/assets/vendor/revolution-slider/revolution/js/extensions/revolution.extension.carousel.min.js"></script>
<script src="/assets/vendor/revolution-slider/revolution/js/extensions/revolution.extension.kenburn.min.js"></script>
<script src="/assets/vendor/revolution-slider/revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
<script src="/assets/vendor/revolution-slider/revolution/js/extensions/revolution.extension.migration.min.js"></script>
<script src="/assets/vendor/revolution-slider/revolution/js/extensions/revolution.extension.navigation.min.js"></script>
<script src="/assets/vendor/revolution-slider/revolution/js/extensions/revolution.extension.parallax.min.js"></script>
<script src="/assets/vendor/revolution-slider/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
<script src="/assets/vendor/revolution-slider/revolution/js/extensions/revolution.extension.video.min.js"></script>

<!-- JS Customization -->
<script src="/assets/js/custom.js"></script>

<!-- JS Implementing Plugins -->
<script  src="/assets/vendor/fancybox/jquery.fancybox.min.js"></script>

<!-- JS Unify -->
<script  src="/assets/js/components/hs.popup.js"></script>

<script src="https://cdn.wilddog.com/sdk/js/2.5.17/wilddog-sync.js"></script>

<script>
  function SETValue(key, value) {
    if (typeof(Storage) !== "undefined") {
      var curTime = new Date().getTime();
      localStorage.setItem(key, JSON.stringify({
        data: value,
        time: curTime
      }));
    }
  }

  function GETvalue(key) {
    if (typeof(Storage) !== "undefined") {
      var data = localStorage.getItem(key);
      if(data) {
        var dataObj = JSON.parse(data);
        if (new Date().getTime() - dataObj.time > 1000*60*60) {
          //alert("信息已过期")
        } else {
          //console.log("data="+dataObj.data);
          //console.log(JSON.parse(dataObj.data));
          var dataObjDatatoJson = dataObj.data
          return dataObjDatatoJson;
        }
      }
    }
  }

  function REQuest(url, finish) {

    var value = GETvalue(url);

    if (value) {
      finish(value);
      return;
    }

    $.ajax({
      type: "get",
      dataType: "jsonp",
      cache: true,
      url: url,
      success: function(data) {
        SETValue(url, data);
        finish(data);
      }
    });
  }


  $(document).on('ready', function() {
    // initialization of header
    $.HSCore.components.HSHeader.init($('#js-header'));
    $.HSCore.helpers.HSHamburgers.init('.hamburger');

    // initialization of MegaMenu
    $('.js-mega-menu').HSMegaMenu();

    // initialization of HSDropdown component
    $.HSCore.components.HSDropdown.init($('[data-dropdown-target]'), {
      afterOpen: function() {
        $(this).find('input[type="search"]').focus();
      }
    });
    // initialization of popups
                                $.HSCore.components.HSPopup.init('.js-fancybox');

                                // initialization of gallery with thumbs
                                $.HSCore.components.HSPopup.init('.js-fancybox-thumbs', {
                                  thumbs: {
                                    showOnStart: true
                                  }
                                });

    // initialization of go to
    $.HSCore.components.HSGoTo.init('.js-go-to');
  });
</script>

<script>

//  百度站长 推送

(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>



  <body>
    <main>

  <!-- Header -->
  <header id="js-header" class="u-header u-header--static u-shadow-v19">
    <!-- Top Bar -->
    <div class="u-header__section g-brd-bottom g-brd-gray-light-v4 g-py-18">
      <div class="container">
        <div class="row align-items-center">

          <!-- Logo -->
<div class="col-md-3 g-hidden-md-down">
  <a href="bm-classic-home-page-1.html" class="navbar-brand">
    <img src="/assets/img/logo.png" alt="Logo">
  </a>
</div>
<!-- End Logo -->


          <!-- Subscribe Form -->
<div class="col-6 col-md-5">
  <form class="input-group rounded">
    <input class="form-control w-100 g-brd-secondary-light-v2 g-brd-primary--focus g-color-secondary-dark-v1 g-placeholder-secondary-dark-v1 g-bg-white g-font-weight-400 g-font-size-13 rounded g-px-20 g-py-12" type="text" placeholder="输入以搜索该博客文章">
    <span class="input-group-addon g-brd-none g-py-0 g-pr-0">
      <button class="btn u-btn-white g-color-primary--hover g-bg-secondary g-font-weight-600 g-font-size-13 text-uppercase rounded g-py-12 g-px-20" type="submit">
        <span class="g-hidden-md-down">Search</span>
        <i class="g-hidden-lg-up fa fa-search"></i>
      </button>
    </span>
  </form>
</div>
<!-- End Subscribe Form -->


          <!-- Language -->
<div id="clock" class="col-4 col-lg-2 g-pos-rel g-px-15 ml-auto">
</div>
<!-- End Language -->


<script type="text/javascript">

var config = {
  syncURL: "https://wd2622139095udguuj.wilddogio.com" //输入节点 URL
};
wilddog.initializeApp(config);
var ref = wilddog.sync().ref("browerlog");

ref.push({
  "url": window.location.href,
  "date": Math.round(new Date().getTime())
});

ref.orderByChild("url").equalTo(window.location.href).on('value', function(snapshot) {

  $("#clock").text("No."+Object.keys(snapshot.val()).length);

  }, function (error) {
});

</script>


          <!-- Account -->
<div class="col-1" id="account">
  <a id="account-dropdown-invoker" class="media align-items-center float-right g-text-underline--none--hover" href="#"
     aria-controls="account-dropdown"
     aria-haspopup="true"
     aria-expanded="false"
     data-dropdown-event="hover"
     data-dropdown-target="#account-dropdown"
     data-dropdown-type="css-animation"
     data-dropdown-duration="300"
     data-dropdown-hide-on-scroll="false"
     data-dropdown-animation-in="fadeIn"
     data-dropdown-animation-out="fadeOut">
    <div class="d-flex g-width-30 g-height-30 mr-2">
      <img class="img-fluid rounded-circle" src="http://blog.msiter.com/favicon/avatar.jpg" alt="Image Description">
    </div>
    <div class="media-body">
      <span class="d-block g-hidden-sm-down g-color-main g-font-weight-600 g-font-size-13">文征</span>
    </div>
  </a>

  <div id="account-dropdown" class="list-unstyled text-right g-width-160 g-brd-around g-brd-secondary-light-v2 g-bg-white rounded g-pos-abs g-right-0 g-py-5 g-mt-57" aria-labelledby="account-dropdown-invoker">

    暂时没想好怎么做

  </div>


</div>
<!-- End Account -->

<script type="text/javascript">

$("#account").mouseover(function(){


});

$("#account").mouseout(function(){

});

</script>


        </div>
      </div>
    </div>
    <!-- End Top Bar -->

    <div class="u-header__section u-header__section--light g-bg-white g-transition-0_3 g-py-10">
      <nav class="js-mega-menu navbar navbar-expand-lg g-px-0">
        <div class="container g-px-15">
          <!-- Logo -->
          <a class="navbar-brand g-hidden-lg-up" href="bm-classic-home-page-1.html">
            <img src="/assets/img/logo.png" alt="Logo">
          </a>
          <!-- End Logo -->

          <!-- Responsive Toggle Button -->
          <button class="navbar-toggler navbar-toggler-right btn g-line-height-1 g-brd-none g-pa-0 ml-auto" type="button"
                  aria-label="Toggle navigation"
                  aria-expanded="false"
                  aria-controls="navBar"
                  data-toggle="collapse"
                  data-target="#navBar">
            <span class="hamburger hamburger--slider g-pa-0">
              <span class="hamburger-box">
                <span class="hamburger-inner"></span>
              </span>
            </span>
          </button>
          <!-- End Responsive Toggle Button -->

          <!-- Navigation -->
          <div class="collapse navbar-collapse align-items-center flex-sm-row g-pt-10 g-pt-5--lg" id="navBar">
            <ul class="navbar-nav g-font-weight-600">

              <!-- Mega Menu Item -->
<li class="hs-has-mega-menu nav-item g-mx-10--lg g-mx-20--xl"
    data-animation-in="fadeIn"
    data-animation-out="fadeOut"
    data-position="right">
  <a id="mega-menu-label-1" class="nav-link text-uppercase g-px-0" href="#" aria-haspopup="true" aria-expanded="false">标签
    <i class="hs-icon hs-icon-arrow-bottom g-font-size-11 g-ml-5"></i></a>

  <!-- Mega Menu -->
  <div class="hs-mega-menu u-shadow-v11 g-text-transform-none g-font-weight-400 g-brd-top g-brd-primary g-brd-top-2 g-bg-white g-left-15 g-right-15 g-pa-30 g-mt-17 g-mt-7--lg--scrolling" aria-labelledby="mega-menu-label-1">
    <div class="row">
      <div class="col-lg-2">
        <ul class="list-unstyled mb-0" style="ov">

          

                      <li class="g-brd-bottom g-brd-gray-light-v4 g-py-10">
                        <a class="g-color-main g-color-main--hover" href="/tags/生活/">生活</a></li>

            

                      <li class="g-brd-bottom g-brd-gray-light-v4 g-py-10">
                        <a class="g-color-main g-color-main--hover" href="/tags/悲观/">悲观</a></li>

            

                      <li class="g-brd-bottom g-brd-gray-light-v4 g-py-10">
                        <a class="g-color-main g-color-main--hover" href="/tags/Objective-C/">Objective-C</a></li>

            

                      <li class="g-brd-bottom g-brd-gray-light-v4 g-py-10">
                        <a class="g-color-main g-color-main--hover" href="/tags/AsyncDisplayKit/">AsyncDisplayKit</a></li>

            

                      <li class="g-brd-bottom g-brd-gray-light-v4 g-py-10">
                        <a class="g-color-main g-color-main--hover" href="/tags/ios/">ios</a></li>

            

        </ul>
      </div>
      <div class="col-lg-1">

      </div>
      <div class="col-lg-9" style="height:auto;" >

        <!-- Background Gray Colored -->
        <ul class="u-list-inline">

          

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/生活/">生活</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/悲观/">悲观</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/Objective-C/">Objective-C</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/AsyncDisplayKit/">AsyncDisplayKit</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/ios/">ios</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/约束教程/">约束教程</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/swift/">swift</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/autolayout/">autolayout</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/AttributedString/">AttributedString</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/iOS8-html2AttributedString-error/">iOS8 html2AttributedString error</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/技巧/">技巧</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/IOS/">IOS</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/mongodb/">mongodb</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/mongoose/">mongoose</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/nodejs/">nodejs</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/RX/">RX</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/java/">java</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/spring-boot/">spring boot</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/mybatis/">mybatis</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/WKWebView/">WKWebView</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/Systematic-distinction/">Systematic distinction</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/WebKit/">WebKit</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/WebView/">WebView</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/UIWebView/">UIWebView</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/Input/">Input</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/File/">File</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/Bug/">Bug</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/破解/">破解</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/抓包/">抓包</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/reactiv/">reactiv</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/rxswift/">rxswift</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/DB/">DB</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/realm/">realm</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/swagger/">swagger</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/api/">api</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/travis-ci/">travis-ci</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/cocoapods/">cocoapods</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/NodeJS/">NodeJS</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/APNs/">APNs</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/八爪鱼/">八爪鱼</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/html/">html</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/js/">js</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/Javascript/">Javascript</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/鼠标悬浮/">鼠标悬浮</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/越狱/">越狱</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/cydia/">cydia</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/制作源/">制作源</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/error/">error</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/奇怪的问题/">奇怪的问题</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/无趣，心理学/">无趣，心理学</a>
                        </li>

            

                        <li class="list-inline-item g-mb-10">
                          <a class="u-tags-v1 g-color-main g-bg-gray-light-v4 g-bg-black--hover g-color-white--hover g-py-4 g-px-10" href="/tags/async/">async</a>
                        </li>

            

        </ul>
        <!-- End Background Gray Colored -->

      </div>
    </div>
  </div>
  <!-- End Mega Menu -->
</li>

              <!-- Mega Menu Item -->
<li class="hs-has-mega-menu nav-item g-mx-10--lg g-mx-20--xl"
    data-animation-in="fadeIn"
    data-animation-out="fadeOut"
    data-position="right">
  <a id="mega-menu-label-5" class="nav-link text-uppercase g-px-0" href="#" aria-haspopup="true" aria-expanded="false">栏目
    <i class="hs-icon hs-icon-arrow-bottom g-font-size-11 g-ml-5"></i></a>

  <!-- Mega Menu -->
  <div class="hs-mega-menu u-shadow-v11 g-text-transform-none g-font-weight-400 g-brd-top g-brd-primary g-brd-top-2 g-bg-primary g-left-15 g-right-15 g-px-30 g-mt-17 g-mt-7--lg--scrolling" aria-labelledby="mega-menu-label-5">
    <div class="row">
      <div class="col-lg-12">
        <ul class="list-inline text-center mb-0">



          

                        <li class="list-inline-item">
                          <a class="d-inline-block g-color-white-opacity-0_8 g-color-white--hover g-px-10 g-py-15" href="/categories/牢骚/">牢骚</a>
                        </li>

            

                        <li class="list-inline-item">
                          <a class="d-inline-block g-color-white-opacity-0_8 g-color-white--hover g-px-10 g-py-15" href="/categories/IOS/">IOS</a>
                        </li>

            

                        <li class="list-inline-item">
                          <a class="d-inline-block g-color-white-opacity-0_8 g-color-white--hover g-px-10 g-py-15" href="/categories/服务器/">服务器</a>
                        </li>

            

                        <li class="list-inline-item">
                          <a class="d-inline-block g-color-white-opacity-0_8 g-color-white--hover g-px-10 g-py-15" href="/categories/开发帮助/">开发帮助</a>
                        </li>

            

                        <li class="list-inline-item">
                          <a class="d-inline-block g-color-white-opacity-0_8 g-color-white--hover g-px-10 g-py-15" href="/categories/Web-前端/">Web 前端</a>
                        </li>

            

                        <li class="list-inline-item">
                          <a class="d-inline-block g-color-white-opacity-0_8 g-color-white--hover g-px-10 g-py-15" href="/categories/生活/">生活</a>
                        </li>

            


        </ul>
      </div>
    </div>
  </div>
  <!-- End Mega Menu -->
</li>
<!-- End Mega Menu Item -->

              <!-- Mega Menu Item -->
<li class="hs-has-mega-menu nav-item g-mx-10--lg g-mx-20--xl"
    data-animation-in="fadeIn"
    data-animation-out="fadeOut"
    data-position="right">
  <a id="mega-menu-label-3" class="nav-link text-uppercase g-px-0" href="#" aria-haspopup="true" aria-expanded="false">最新文章
    <i class="hs-icon hs-icon-arrow-bottom g-font-size-11 g-ml-5"></i></a>

  <!-- Mega Menu -->
  <div class="hs-mega-menu u-shadow-v11 g-text-transform-none g-font-weight-400 g-brd-top g-brd-primary g-brd-top-2 g-bg-white g-left-15 g-right-15 g-pa-30 g-mt-17 g-mt-7--lg--scrolling" aria-labelledby="mega-menu-label-3">
    <div class="row">
      <div class="col-lg-4">
        <article>
          <figure class="g-pos-rel">
            <img class="img-fluid w-100 g-mb-20" src="/assets/img-temp/900x600/img7.jpg" alt="Image Description">
          </figure>
          <h3 class="h4 g-mb-10"><a class="g-color-gray-dark-v2" href="#">Love the mother nature</a>
          </h3>
          <ul class="u-list-inline g-font-size-12 g-color-gray-dark-v4">
            <li class="list-inline-item">
              <a class="g-color-gray-dark-v4 g-text-underline--none--hover" href="#">Kathy Reyes</a>
            </li>
            <li class="list-inline-item">/</li>
            <li class="list-inline-item">July 20, 2016</li>
            <li class="list-inline-item">/</li>
            <li class="list-inline-item">
              <a class="g-color-gray-dark-v4 g-text-underline--none--hover" href="#">
                <i class="fa fa-comments-o"></i> 18
              </a>
            </li>
          </ul>
        </article>
      </div>
      <div class="col-lg-4">
        <article class="media g-mb-20">
          <a class="d-flex mr-3" href="#"><img class="g-width-120 g-height-70" src="/assets/img-temp/500x320/img1.jpg" alt="Image Description"></a>
          <div class="media-body">
            <h3 class="h6">
              <a class="g-color-main" href="#">Top 10 Luxury Hotels - 5 Star Best Luxury Hotels</a>
            </h3>
            <ul class="u-list-inline g-font-size-12 g-color-gray-dark-v4">
              <li class="list-inline-item">July 07, 2016</li>
              <li class="list-inline-item">/</li>
              <li class="list-inline-item">
                <a class="g-color-gray-dark-v4 g-text-underline--none--hover" href="#">
                  <i class="fa fa-comments-o"></i> 24
                </a>
              </li>
            </ul>
          </div>
        </article>

        <article class="media g-mb-20">
          <a class="d-flex mr-3" href="#"><img class="g-width-120 g-height-70" src="/assets/img-temp/500x320/img2.jpg" alt="Image Description"></a>
          <div class="media-body">
            <h3 class="h6"><a class="g-color-main" href="#">10 Most beautiful beaches</a></h3>
            <ul class="u-list-inline g-font-size-12 g-color-gray-dark-v4">
              <li class="list-inline-item">July 20, 2016</li>
              <li class="list-inline-item">/</li>
              <li class="list-inline-item">
                <a class="g-color-gray-dark-v4 g-text-underline--none--hover" href="#">
                  <i class="fa fa-comments-o"></i> 18
                </a>
              </li>
            </ul>
          </div>
        </article>

        <article class="media g-mb-20">
          <a class="d-flex mr-3" href="#"><img class="g-width-120 g-height-70" src="/assets/img-temp/500x320/img3.jpg" alt="Image Description"></a>
          <div class="media-body">
            <h3 class="h6">
              <a class="g-color-main" href="#">Stylish things to do, see and buy this week</a></h3>
            <ul class="u-list-inline g-font-size-12 g-color-gray-dark-v4">
              <li class="list-inline-item">July 16, 2016</li>
              <li class="list-inline-item">/</li>
              <li class="list-inline-item">
                <a class="g-color-gray-dark-v4 g-text-underline--none--hover" href="#">
                  <i class="fa fa-comments-o"></i> 31
                </a>
              </li>
            </ul>
          </div>
        </article>
      </div>
      <div class="col-lg-4">
        <article class="media g-mb-20">
          <a class="d-flex mr-3" href="#"><img class="g-width-120 g-height-70" src="/assets/img-temp/500x320/img1.jpg" alt="Image Description"></a>
          <div class="media-body">
            <h3 class="h6">
              <a class="g-color-main" href="#">8 health benefits and drawbacks of coffee</a></h3>
            <ul class="u-list-inline g-font-size-12 g-color-gray-dark-v4">
              <li class="list-inline-item">July 30, 2016</li>
              <li class="list-inline-item">/</li>
              <li class="list-inline-item">
                <a class="g-color-gray-dark-v4 g-text-underline--none--hover" href="#">
                  <i class="fa fa-comments-o"></i> 12
                </a>
              </li>
            </ul>
          </div>
        </article>

        <article class="media g-mb-20">
          <a class="d-flex mr-3" href="#"><img class="g-width-120 g-height-70" src="/assets/img-temp/500x320/img2.jpg" alt="Image Description"></a>
          <div class="media-body">
            <h3 class="h6">
              <a class="g-color-main" href="#">Stylish things to do, see and buy this week</a></h3>
            <ul class="u-list-inline g-font-size-12 g-color-gray-dark-v4">
              <li class="list-inline-item">July 16, 2016</li>
              <li class="list-inline-item">/</li>
              <li class="list-inline-item">
                <a class="g-color-gray-dark-v4 g-text-underline--none--hover" href="#">
                  <i class="fa fa-comments-o"></i> 31
                </a>
              </li>
            </ul>
          </div>
        </article>

        <article class="media g-mb-20">
          <a class="d-flex mr-3" href="#"><img class="g-width-120 g-height-70" src="/assets/img-temp/500x320/img3.jpg" alt="Image Description"></a>
          <div class="media-body">
            <h3 class="h6">
              <a class="g-color-main" href="#">Top 10 Luxury Hotels - 5 Star Best Luxury Hotels</a>
            </h3>
            <ul class="u-list-inline g-font-size-12 g-color-gray-dark-v4">
              <li class="list-inline-item">July 07, 2016</li>
              <li class="list-inline-item">/</li>
              <li class="list-inline-item">
                <a class="g-color-gray-dark-v4 g-text-underline--none--hover" href="#">
                  <i class="fa fa-comments-o"></i> 24
                </a>
              </li>
            </ul>
          </div>
        </article>
      </div>
    </div>
  </div>
  <!-- End Mega Menu -->
</li>
<!-- End Mega Menu Item -->

              <!-- Mega Menu Item -->
<li class="hs-has-mega-menu nav-item g-mx-10--lg g-mx-20--xl"
    data-animation-in="fadeIn"
    data-animation-out="fadeOut"
    data-position="right">
  <a id="mega-menu-label-4" class="nav-link text-uppercase g-px-0" href="#" aria-haspopup="true" aria-expanded="false">最火文章
    <i class="hs-icon hs-icon-arrow-bottom g-font-size-11 g-ml-5"></i></a>

  <!-- Mega Menu -->
  <div class="hs-mega-menu u-shadow-v11 g-text-transform-none g-font-weight-400 g-brd-top g-brd-primary g-brd-top-2 g-bg-white g-left-15 g-right-15 g-pa-30 g-mt-17 g-mt-7--lg--scrolling" aria-labelledby="mega-menu-label-4">
    <div class="row">
      <div class="col-lg-4">
        <article class="u-block-hover">
          <figure class="g-bg-cover g-bg-black-gradient-opacity-v1--after">
            <img class="img-fluid u-block-hover__main--zoom-v1" src="/assets/img-temp/500x320/img1.jpg" alt="Image Description">
          </figure>
          <span class="g-pos-abs g-top-20 g-left-20">
          <a class="btn btn-sm u-btn-red rounded-0" href="#">Fashion</a>
        </span>
          <span class="u-icon-v3 u-icon-size--sm g-bg-white g-color-black g-rounded-50x g-cursor-pointer g-pos-abs g-top-20 g-right-20">
          <i class="icon-camera"></i>
        </span>
          <header class="g-pos-abs g-bottom-10 g-left-20 g-right-20">
            <small class="g-color-white">
              <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> July 26, 2016
            </small>
            <h3 class="h4 g-font-weight-600 g-mt-5">
              <a class="g-color-white g-color-white--hover" href="#">Be ready, fashion of the year is coming this year</a>
            </h3>
          </header>
        </article>
      </div>
      <div class="col-lg-4">
        <article class="u-block-hover">
          <figure class="g-bg-cover g-bg-black-gradient-opacity-v1--after">
            <img class="img-fluid u-block-hover__main--zoom-v1" src="/assets/img-temp/500x320/img2.jpg" alt="Image Description">
          </figure>
          <span class="g-pos-abs g-top-20 g-left-20">
          <a class="btn btn-sm u-btn-red rounded-0" href="#">Beaches</a>
        </span>
          <span class="u-icon-v3 u-icon-size--sm g-bg-white g-color-black g-rounded-50x g-cursor-pointer g-pos-abs g-top-20 g-right-20">
          <i class="icon-camera"></i>
        </span>
          <header class="g-pos-abs g-bottom-10 g-left-20 g-right-20">
            <small class="g-color-white">
              <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> July 15, 2016
            </small>
            <h3 class="h4 g-font-weight-600 g-mt-5">
              <a class="g-color-white g-color-white--hover" href="#">Must be visited places in the USA - Florida Beaches</a>
            </h3>
          </header>
        </article>
      </div>
      <div class="col-lg-4">
        <article class="u-block-hover">
          <figure class="g-bg-cover g-bg-black-gradient-opacity-v1--after">
            <img class="img-fluid u-block-hover__main--zoom-v1" src="/assets/img-temp/500x320/img3.jpg" alt="Image Description">
          </figure>
          <span class="g-pos-abs g-top-20 g-left-20">
          <a class="btn btn-sm u-btn-red rounded-0" href="#">Food</a>
        </span>
          <span class="u-icon-v3 u-icon-size--sm g-bg-white g-color-black g-rounded-50x g-cursor-pointer g-pos-abs g-top-20 g-right-20">
          <i class="icon-camera g-left-2"></i>
        </span>
          <header class="g-pos-abs g-bottom-10 g-left-20 g-right-20">
            <small class="g-color-white">
              <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> July 8, 2016
            </small>
            <h3 class="h4 g-font-weight-600 g-mt-5">
              <a class="g-color-white g-color-white--hover" href="#">Why your next glass of juice will cost you more</a>
            </h3>
          </header>
        </article>
      </div>
    </div>
  </div>
  <!-- End Mega Menu -->
</li>
<!-- End Mega Menu Item -->

              <!-- Mega Menu Item -->
<li class="hs-has-mega-menu nav-item g-mx-10--lg g-ml-15--xl"
    data-animation-in="fadeIn"
    data-animation-out="fadeOut"
    data-position="right">
  <a id="mega-menu-label-7" class="nav-link text-uppercase g-px-0" href="#" aria-haspopup="true" aria-expanded="false">新闻热点
    <i class="hs-icon hs-icon-arrow-bottom g-font-size-11 g-ml-5"></i></a>

  <!-- Mega Menu -->
  <div class="hs-mega-menu u-shadow-v11 g-text-transform-none g-font-weight-400 g-brd-top g-brd-primary g-brd-top-2 g-bg-white g-left-15 g-right-15 g-pa-30 g-mt-17 g-mt-7--lg--scrolling" aria-labelledby="mega-menu-label-7">
    <div class="row">
      <div class="col-lg-3 g-mb-20 g-mb-0--lg">
        <!-- Article -->
        <article>
          <div class="g-font-size-12 g-mb-5">
            <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> Aug 16, 2016
          </div>

          <h3 class="h6">
            <a class="g-color-main" href="#">You've been making French Pie all wrong - Until Now</a>
          </h3>
        </article>
        <!-- End Article -->

        <hr class="g-mt-15 g-mb-10">

        <!-- Article -->
        <article>
          <div class="g-font-size-12 g-mb-5">
            <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> Aug 02, 2016
          </div>

          <h3 class="h6">
            <a class="g-color-main" href="#">Unify facts, study finds - sensitive to gluten without having coeliac disease</a>
          </h3>
        </article>
        <!-- End Article -->
      </div>

      <div class="col-lg-3 g-mb-20 g-mb-0--lg">
        <!-- Article -->
        <article>
          <div class="g-font-size-12 g-mb-5">
            <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> July 18, 2016
          </div>

          <h3 class="h6">
            <a class="g-color-main" href="#">Why your next cup of cofee with milk will cost you more</a>
          </h3>
        </article>
        <!-- End Article -->

        <hr class="g-mt-15 g-mb-10">

        <!-- Article -->
        <article>
          <div class="g-font-size-12 g-mb-5">
            <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> July 12, 2016
          </div>

          <h3 class="h6">
            <a class="g-color-main" href="#">Incredible product and quality: Unify best template of the year</a>
          </h3>
        </article>
        <!-- End Article -->
      </div>

      <div class="col-lg-3 g-mb-20 g-mb-0--lg">
        <!-- Article -->
        <article>
          <div class="g-font-size-12 g-mb-5">
            <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> Aug 16, 2016
          </div>

          <h3 class="h6">
            <a class="g-color-main" href="#">Some post title will be implimented here and It's cool!</a>
          </h3>
        </article>
        <!-- End Article -->

        <hr class="g-mt-15 g-mb-10">

        <!-- Article -->
        <article>
          <div class="g-font-size-12 g-mb-5">
            <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> Aug 02, 2016
          </div>

          <h3 class="h6">
            <a class="g-color-main" href="#">Wireframe approach for the news blocks and pages</a>
          </h3>
        </article>
        <!-- End Article -->
      </div>

      <div class="col-lg-3 g-mb-20 g-mb-0--lg">
        <!-- Article -->
        <article>
          <div class="g-font-size-12 g-mb-5">
            <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> July 18, 2016
          </div>

          <h3 class="h6">
            <a class="g-color-main" href="#">Over thousands of components help you to boost your project</a>
          </h3>
        </article>
        <!-- End Article -->

        <hr class="g-mt-15 g-mb-10">

        <!-- Article -->
        <article>
          <div class="g-font-size-12 g-mb-5">
            <i class="icon-clock g-pos-rel g-top-1 g-mr-2"></i> July 12, 2016
          </div>

          <h3 class="h6">
            <a class="g-color-main" href="#">How to run a ticket: Best 10 point approaches for people who stands..</a>
          </h3>
        </article>
        <!-- End Article -->
      </div>
    </div>
  </div>
  <!-- End Mega Menu -->
</li>
<!-- End Mega Menu Item -->

              <!-- Main -->
<li class="nav-item g-mx-10--lg g-mx-20--xl">
  <a id="nav-link--pages" class="nav-link text-uppercase g-color-primary--hover g-px-0" href="/">
    主页
  </a>
</li>
<!-- End Main -->








            </ul>
          </div>
          <!-- End Navigation -->
        </div>
      </nav>
    </div>
  </header>
  <!-- End Header -->


    <section class="g-pt-50 g-pb-100">
  <div class="container">
    <div class="row">
      <!-- Articles Content -->
      <div class="col-lg-9 g-mb-50 g-mb-0--lg">
        <article class="g-mb-60">
          <header class="g-mb-30">
            <h2 class="h1 g-mb-15">Nodejs Async 学习</h2>

            <ul class="list-inline d-sm-flex g-color-gray-dark-v4 mb-0">
              <li class="list-inline-item">
                <a class="u-link-v5 g-color-gray-dark-v4 g-color-primary--hover" href="#">
                  小酒馆老板
                </a>
              </li>
              <li class="list-inline-item g-mx-10">/</li>
              <li class="list-inline-item">
                2015/7/6 18:41:43
              </li>
              <li class="list-inline-item g-mx-10">/</li>
              <li class="list-inline-item g-mr-10">
                <a class="u-link-v5 g-color-gray-dark-v4 g-color-primary--hover" href="#">
                        <i class="align-middle mr-2 icon-hotel-restaurant-242 u-line-icon-pro"></i>共有12,302个字
                      </a>
              </li>
              <li class="list-inline-item g-mx-10">/</li>
              <li class="list-inline-item g-mr-10">
                <a class="u-link-v5 g-color-gray-dark-v4 g-color-primary--hover" href="#">
                        <i class="align-middle mr-2 icon-hotel-restaurant-003 u-line-icon-pro"></i>预计阅读61分钟
                      </a>
              </li>
            </ul>

            <hr class="g-brd-gray-light-v4 g-my-15">



                      <!-- Social Shares -->
<div class="g-mb-30">

    <ul class="list-inline text-uppercase mb-0">
      <li class="list-inline-item g-mr-10">
        <strong class="align-middle g-font-size-24 jiathis_counter_style"><a class="jiathis_counter_style"></a></strong>
      </li>
      <li class="list-inline-item g-mr-10">
        <span class="g-color-gray-dark-v5">|</span>
      </li>
      <li class="list-inline-item g-mr-10">
        <a class="jiathis_button_weixin btn u-btn-teal g-font-size-12 rounded g-px-20--sm g-py-10" style="color:white;">
          <i class="fa fa-wechat g-mr-5--sm"></i>
          <span class="g-hidden-xs-down">分享到微信</span>
      </a>
      </li>
      <li class="list-inline-item g-mr-10">
        <a class="jiathis_button_tqq btn u-btn-twitter g-font-size-12 rounded g-px-20--sm g-py-10" href="#">
              <i class="fa fa-qq g-mr-5--sm"></i> <span class="g-hidden-xs-down">分享到 QQ</span>
            </a>
      </li>
      <li class="list-inline-item g-mr-10">
        <a class="jiathis_button_tsina btn u-btn-lightred g-font-size-12 rounded g-px-20--sm g-py-10 " href="#">
              <i class="fa fa-weibo g-mr-5--sm"></i> <span class="g-hidden-xs-down">分享到 新浪微博</span>
            </a>
      </li>
    </ul>
</div>
          <script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js" charset="utf-8"></script>
<!-- End Social Shares -->



          </header>

          <div class="">
            <p>      <figure class="mb-4">      <a class="js-fancybox-thumbs" href="http://image.msiter.com/stock-photo-151005535.jpg" title="Lightbox Gallery" data-fancybox-gallery="lightbox-gallery-2" data-fancybox-speed="500" data-fancybox-slide-speed="1000">            <img class="img-fluid" src="http://image.msiter.com/stock-photo-151005535.jpg" alt="Image Description">          </a><figcaption class="figure-caption g-font-size-12 g-color-gray-dark-v4 g-mt-5 text-center">        &#x8BA9;&#x4F60;&#x96BE;&#x8FC7;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x6709;&#x4E00;&#x5929;&#xFF0C;&#x4F60;&#x4E00;&#x5B9A;&#x4F1A;&#x7B11;&#x7740;&#x8BF4;&#x51FA;&#x6765;&#x3002;</figcaption></figure></p>
    <!-- Taglines Bordered -->    <div class="g-brd-around g-brd-gray-light-v4 g-brd-2 g-brd-red-left g-line-height-1_8 g-pa-30 g-mb-30">      <em style="padding:0px;margin:0px;">
<p>&#x672C;&#x6587;&#x6574;&#x7406;&#x4E8E;<a href="https://github.com/bsspirit" target="_blank" rel="noopener"><code>bsspirit</code></a>&#x7684;<a href="http://blog.fens.me/nodejs-async/" target="_blank" rel="noopener">&#x535A;&#x6587;</a>&#x548C;<a href="https://github.com/bsspirit/async_demo" target="_blank" rel="noopener">&#x4EE3;&#x7801;&#x793A;&#x4F8B;</a></p>
</em>    </div>    <!-- End Taglines Bordered -->    
<p><code>Async</code>&#x662F;&#x4E00;&#x4E2A;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#x5DE5;&#x5177;&#x5305;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x76F4;&#x63A5;&#x800C;&#x5F3A;&#x5927;&#x7684;&#x5F02;&#x6B65;&#x529F;&#x80FD;&#x3002;&#x57FA;&#x4E8E;<code>Javascript</code>&#x4E3A;<code>Node.js</code>&#x8BBE;&#x8BA1;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x4F7F;&#x7528;&#x3002;<br><code>Async</code>&#x63D0;&#x4F9B;&#x4E86;&#x5927;&#x7EA6;20&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x5305;&#x62EC;&#x5E38;&#x7528;&#x7684;<code>map</code>,<code>reduce</code>, <code>filter</code>, <code>forEach</code> &#x7B49;&#xFF0C;&#x5F02;&#x6B65;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#x6A21;&#x5F0F;&#x5305;&#x62EC;&#xFF0C;&#x4E32;&#x884C;(<code>series</code>)&#xFF0C;&#x5E76;&#x884C;(<code>parallel</code>)&#xFF0C;&#x7011;&#x5E03;(<code>waterfall</code>)&#x7B49;&#x3002;</p>
<a id="more"></a>
<h2 id="&#x9879;&#x76EE;&#x7B80;&#x4ECB;"><a href="#&#x9879;&#x76EE;&#x7B80;&#x4ECB;" class="headerlink" title="&#x9879;&#x76EE;&#x7B80;&#x4ECB;"></a>&#x9879;&#x76EE;&#x7B80;&#x4ECB;</h2><p><a href="https://github.com/caolan/async" target="_blank" rel="noopener">Async</a>  </p>
<p><em>For Async v1.5.x documentation, go <a href="https://github.com/caolan/async/blob/v1.5.2/README.md" target="_blank" rel="noopener">HERE</a></em></p>
<p>Async is a utility module which provides straight-forward, powerful functions<br>for working with asynchronous JavaScript. Although originally designed for<br>use with <a href="https://nodejs.org/" target="_blank" rel="noopener">Node.js</a> and installable via <code>npm install --save async</code>,<br>it can also be used directly in the browser.</p>
<p>Async is also installable via:</p>
<ul class="g-list-style-circle">
<li><a href="http://bower.io/" target="_blank" rel="noopener">bower</a>: <code>bower install async</code></li>
<li><a href="https://github.com/componentjs/component" target="_blank" rel="noopener">component</a>: <code>component install caolan/async</code></li>
<li><a href="http://jamjs.org/" target="_blank" rel="noopener">jam</a>: <code>jam install async</code></li>
</ul>
<p>Async provides around 70 functions that include the usual &#x2018;functional&#x2019;<br>suspects (<code>map</code>, <code>reduce</code>, <code>filter</code>, <code>each</code>&#x2026;) as well as some common patterns<br>for asynchronous control flow (<code>parallel</code>, <code>series</code>, <code>waterfall</code>&#x2026;). All these<br>functions assume you follow the Node.js convention of providing a single<br>callback as the last argument of your asynchronous function &#x2013; a callback which expects an Error as its first argument &#x2013; and calling the callback once.</p>
<h2 id="&#x529F;&#x80FD;&#x7B80;&#x4ECB;"><a href="#&#x529F;&#x80FD;&#x7B80;&#x4ECB;" class="headerlink" title="&#x529F;&#x80FD;&#x7B80;&#x4ECB;"></a>&#x529F;&#x80FD;&#x7B80;&#x4ECB;</h2><p><br></p>
<h3 id="&#x96C6;&#x5408;-Collections"><a href="#&#x96C6;&#x5408;-Collections" class="headerlink" title="&#x96C6;&#x5408;:Collections"></a>&#x96C6;&#x5408;:<code>Collections</code></h3><ul class="g-list-style-circle">
<li><a href="#each"><code>each</code></a>: &#x5982;&#x679C;&#x60F3;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;&#x90FD;&#x6267;&#x884C;&#x540C;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x3002;</li>
<li><a href="#map"><code>map</code></a>: &#x5BF9;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x6267;&#x884C;&#x67D0;&#x4E2A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x5F97;&#x5230;&#x7ED3;&#x679C;&#x3002;&#x6240;&#x6709;&#x7684;&#x7ED3;&#x679C;&#x5C06;&#x6C47;&#x603B;&#x5230;&#x6700;&#x7EC8;&#x7684;callback&#x91CC;&#x3002;&#x4E0E;each&#x7684;&#x533A;&#x522B;&#x662F;&#xFF0C;each&#x53EA;&#x5173;&#x5FC3;&#x64CD;&#x4F5C;&#x4E0D;&#x7BA1;&#x6700;&#x540E;&#x7684;&#x503C;&#xFF0C;&#x800C;map&#x5173;&#x5FC3;&#x7684;&#x6700;&#x540E;&#x4EA7;&#x751F;&#x7684;&#x503C;&#x3002;</li>
<li><a href="#filter"><code>filter</code></a>: &#x4F7F;&#x7528;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x5BF9;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x7B5B;&#x9009;, &#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;iterator&#x7684;callback&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x53EA;&#x80FD;&#x63A5;&#x6536;true&#x6216;false&#x3002;</li>
<li><a href="#filter"><code>reject</code></a>: reject&#x8DDF;filter&#x6B63;&#x597D;&#x76F8;&#x53CD;&#xFF0C;&#x5F53;&#x6D4B;&#x8BD5;&#x4E3A;true&#x65F6;&#x5219;&#x629B;&#x5F03;</li>
<li><a href="#reduce"><code>reduce</code></a>: &#x53EF;&#x4EE5;&#x8BA9;&#x6211;&#x4EEC;&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x521D;&#x59CB;&#x503C;&#xFF0C;&#x7528;&#x5B83;&#x4E0E;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x505A;&#x8FD0;&#x7B97;&#xFF0C;&#x6700;&#x540E;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x503C;&#x3002;reduce&#x4ECE;&#x5DE6;&#x5411;&#x53F3;&#x6765;&#x904D;&#x5386;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x4ECE;&#x53F3;&#x5411;&#x5DE6;&#xFF0C;&#x53EF;&#x4F7F;&#x7528;reduceRight&#x3002;</li>
<li><a href="#detect"><code>detect</code></a>: &#x7528;&#x4E8E;&#x53D6;&#x5F97;&#x96C6;&#x5408;&#x4E2D;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;</li>
<li><a href="#sortBy"><code>sortBy</code></a>: &#x5BF9;&#x96C6;&#x5408;&#x5185;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x4F9D;&#x636E;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x67D0;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x540E;&#x4EA7;&#x751F;&#x7684;&#x503C;&#xFF0C;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x6392;&#x5E8F;&#x3002;</li>
<li><a href="#some"><code>some</code></a>: &#x5F53;&#x96C6;&#x5408;&#x4E2D;&#x662F;&#x5426;&#x6709;&#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x6700;&#x7EC8;callback&#x5F97;&#x5230;&#x7684;&#x503C;&#x4E3A;true&#xFF0C;&#x5426;&#x5219;&#x4E3A;false.</li>
<li><a href="#every"><code>every</code></a>: &#x5982;&#x679C;&#x96C6;&#x5408;&#x91CC;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#xFF0C;&#x5219;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;&#x56DE;&#x8C03;&#x7684;result&#x4E3A;true&#xFF0C;&#x5426;&#x5219;&#x4E3A;false</li>
<li><a href="#concat"><code>concat</code></a>: &#x5C06;&#x591A;&#x4E2A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x7684;&#x7ED3;&#x679C;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;</li>
</ul>
<h3 id="&#x6D41;&#x7A0B;&#x63A7;&#x5236;-Control-Flow"><a href="#&#x6D41;&#x7A0B;&#x63A7;&#x5236;-Control-Flow" class="headerlink" title="&#x6D41;&#x7A0B;&#x63A7;&#x5236;: Control Flow"></a>&#x6D41;&#x7A0B;&#x63A7;&#x5236;: <code>Control Flow</code></h3><ul class="g-list-style-circle">
<li><a href="#concat"><code>concat</code></a>: &#x4E32;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x6267;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x3002;</li>
<li><a href="#parallel"><code>parallel</code></a>: &#x5E76;&#x884C;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x90FD;&#x662F;&#x7ACB;&#x5373;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x5176;&#x5B83;&#x51FD;&#x6570;&#x5148;&#x6267;&#x884C;&#x3002;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#x7684;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x6309;&#x7167;tasks&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x7684;&#x987A;&#x5E8F;&#x3002;</li>
<li><a href="#whilst"><code>whilst</code></a>: &#x76F8;&#x5F53;&#x4E8E;while&#xFF0C;&#x4F46;&#x5176;&#x4E2D;&#x7684;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#x5C06;&#x5728;&#x5B8C;&#x6210;&#x540E;&#x624D;&#x4F1A;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#x3002;</li>
<li><a href="#whilst"><code>doWhilst</code></a>: &#x76F8;&#x5F53;&#x4E8E;do&#x2026;while, doWhilst&#x4EA4;&#x6362;&#x4E86;fn,test&#x7684;&#x53C2;&#x6570;&#x4F4D;&#x7F6E;&#xFF0C;&#x5148;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#xFF0C;&#x518D;&#x505A;test&#x5224;&#x65AD;&#x3002;</li>
<li><a href="#whilst"><code>until</code></a>: until&#x4E0E;whilst&#x6B63;&#x597D;&#x76F8;&#x53CD;&#xFF0C;&#x5F53;test&#x4E3A;false&#x65F6;&#x5FAA;&#x73AF;&#xFF0C;&#x4E0E;true&#x65F6;&#x8DF3;&#x51FA;&#x3002;&#x5176;&#x5B83;&#x7279;&#x6027;&#x4E00;&#x81F4;&#x3002;</li>
<li><a href="#whilst"><code>doUntil</code></a>: doUntil&#x4E0E;doWhilst&#x6B63;&#x597D;&#x76F8;&#x53CD;&#xFF0C;&#x5F53;test&#x4E3A;false&#x65F6;&#x5FAA;&#x73AF;&#xFF0C;&#x4E0E;true&#x65F6;&#x8DF3;&#x51FA;&#x3002;&#x5176;&#x5B83;&#x7279;&#x6027;&#x4E00;&#x81F4;&#x3002;</li>
<li><a href="#whilst"><code>forever</code></a>: &#x65E0;&#x8BBA;&#x6761;&#x4EF6;&#x5FAA;&#x73AF;&#x6267;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x51FA;&#x9519;&#xFF0C;callback&#x6C38;&#x8FDC;&#x4E0D;&#x88AB;&#x6267;&#x884C;&#x3002;</li>
<li><a href="#waterfall"><code>waterfall</code></a>: &#x6309;&#x987A;&#x5E8F;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#x4E00;&#x7EC4;&#x51FD;&#x6570;&#x3002;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x4EA7;&#x751F;&#x7684;&#x503C;&#xFF0C;&#x90FD;&#x5C06;&#x4F20;&#x7ED9;&#x4E0B;&#x4E00;&#x4E2A;&#x3002;</li>
<li><a href="#compose"><code>compose</code></a>: &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5305;&#x62EC;&#x4E00;&#x7EC4;&#x5F02;&#x6B65;&#x51FD;&#x6570;&#x7684;&#x51FD;&#x6570;&#x96C6;&#x5408;&#xFF0C;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x4F1A;&#x6D88;&#x8D39;&#x4E0A;&#x4E00;&#x6B21;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x3002;&#x628A;f(),g(),h()&#x5F02;&#x6B65;&#x51FD;&#x6570;&#xFF0C;&#x7EC4;&#x5408;&#x6210;f(g(h()))&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x901A;&#x8FC7;callback&#x5F97;&#x5230;&#x8FD4;&#x56DE;&#x503C;&#x3002;</li>
<li><a href="#applyEach"><code>applyEach</code></a>: &#x5B9E;&#x73B0;&#x7ED9;&#x4E00;&#x6570;&#x7EC4;&#x4E2D;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x4F20;&#x76F8;&#x540C;&#x53C2;&#x6570;&#xFF0C;&#x901A;&#x8FC7;callback&#x8FD4;&#x56DE;&#x3002;&#x5982;&#x679C;&#x53EA;&#x4F20;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5C06;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5BF9;&#x8C61;&#xFF0C;&#x6211;&#x53EF;&#x4EE5;&#x4F20;&#x53C2;&#x8C03;&#x7528;&#x3002;</li>
<li><a href="#queue"><code>queue</code></a>: &#x662F;&#x4E00;&#x4E2A;&#x4E32;&#x884C;&#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x901A;&#x8FC7;&#x9650;&#x5236;&#x4E86;worker&#x6570;&#x91CF;&#xFF0C;&#x4E0D;&#x518D;&#x4E00;&#x6B21;&#x6027;&#x5168;&#x90E8;&#x6267;&#x884C;&#x3002;&#x5F53;worker&#x6570;&#x91CF;&#x4E0D;&#x591F;&#x7528;&#x65F6;&#xFF0C;&#x65B0;&#x52A0;&#x5165;&#x7684;&#x4EFB;&#x52A1;&#x5C06;&#x4F1A;&#x6392;&#x961F;&#x7B49;&#x5019;&#xFF0C;&#x76F4;&#x5230;&#x6709;&#x65B0;&#x7684;worker&#x53EF;&#x7528;&#x3002;</li>
<li><a href="#cargo"><code>cargo</code></a>: &#x4E00;&#x4E2A;&#x4E32;&#x884C;&#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;queue&#xFF0C;&#x901A;&#x8FC7;&#x9650;&#x5236;&#x4E86;worker&#x6570;&#x91CF;&#xFF0C;&#x4E0D;&#x518D;&#x4E00;&#x6B21;&#x6027;&#x5168;&#x90E8;&#x6267;&#x884C;&#x3002;&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x5728;&#x4E8E;&#xFF0C;cargo&#x6BCF;&#x6B21;&#x4F1A;&#x52A0;&#x8F7D;&#x6EE1;&#x989D;&#x7684;&#x4EFB;&#x52A1;&#x505A;&#x4E3A;&#x4EFB;&#x52A1;&#x5355;&#x5143;&#xFF0C;&#x53EA;&#x6709;&#x4EFB;&#x52A1;&#x5355;&#x5143;&#x4E2D;&#x5168;&#x90E8;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x52A0;&#x8F7D;&#x65B0;&#x7684;&#x4EFB;&#x52A1;&#x5355;&#x5143;&#x3002;</li>
<li><a href="#auto"><code>auto</code></a>: &#x7528;&#x6765;&#x5904;&#x7406;&#x6709;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7684;&#x591A;&#x4E2A;&#x4EFB;&#x52A1;&#x7684;&#x6267;&#x884C;&#x3002;</li>
<li><a href="#iterator"><code>iterator</code></a>: &#x5C06;&#x4E00;&#x7EC4;&#x51FD;&#x6570;&#x5305;&#x88C5;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;iterator&#xFF0C;&#x521D;&#x6B21;&#x8C03;&#x7528;&#x6B64;iterator&#x65F6;&#xFF0C;&#x4F1A;&#x6267;&#x884C;&#x5B9A;&#x4E49;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5E76;&#x8FD4;&#x56DE;&#x7B2C;&#x4E8C;&#x4E2A;&#x51FD;&#x6570;&#x4EE5;&#x4F9B;&#x8C03;&#x7528;&#x3002;</li>
<li><a href="#apply"><code>apply</code></a>: &#x53EF;&#x4EE5;&#x8BA9;&#x6211;&#x4EEC;&#x7ED9;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x9884;&#x7ED1;&#x5B9A;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#x5E76;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x53EF;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x7684;&#x65B0;&#x51FD;&#x6570;&#xFF0C;&#x7B80;&#x5316;&#x4EE3;&#x7801;&#x3002;</li>
<li><a href="#nextTick"><code>nextTick</code></a>: &#x4E0E;nodejs&#x7684;nextTick&#x4E00;&#x6837;&#xFF0C;&#x518D;&#x6700;&#x540E;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x3002;</li>
<li><a href="#times"><code>times</code></a>: &#x5F02;&#x6B65;&#x8FD0;&#x884C;,times&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8C03;&#x7528;&#x51E0;&#x6B21;&#xFF0C;&#x5E76;&#x628A;&#x7ED3;&#x679C;&#x5408;&#x5E76;&#x5230;&#x6570;&#x7EC4;&#x4E2D;&#x8FD4;&#x56DE;</li>
<li><a href="#times"><code>timesSeries</code></a>: &#x4E0E;time&#x7C7B;&#x4F3C;&#xFF0C;&#x552F;&#x4E00;&#x4E0D;&#x540C;&#x7684;&#x662F;&#x540C;&#x6B65;&#x6267;&#x884C;</li>
</ul>
<h3 id="&#x5DE5;&#x5177;&#x7C7B;-Utils"><a href="#&#x5DE5;&#x5177;&#x7C7B;-Utils" class="headerlink" title="&#x5DE5;&#x5177;&#x7C7B;: Utils"></a>&#x5DE5;&#x5177;&#x7C7B;: <code>Utils</code></h3><ul class="g-list-style-circle">
<li><a href="#util.js"><code>memoize</code></a>: &#x8BA9;&#x67D0;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7F13;&#x5B58;&#x5B83;&#x7684;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x3002;&#x5BF9;&#x4E8E;&#x76F8;&#x540C;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x53EA;&#x8BA1;&#x7B97;&#x4E00;&#x6B21;&#xFF0C;&#x4E0B;&#x6B21;&#x5C31;&#x76F4;&#x63A5;&#x62FF;&#x5230;&#x4E4B;&#x524D;&#x7B97;&#x597D;&#x7684;&#x7ED3;&#x679C;&#x3002;</li>
<li><a href="#util.js"><code>unmemoize</code></a>: &#x8BA9;&#x5DF2;&#x7ECF;&#x88AB;&#x7F13;&#x5B58;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x4E0D;&#x7F13;&#x5B58;&#x7684;&#x51FD;&#x6570;&#x5F15;&#x7528;&#x3002;</li>
<li><a href="#util.js"><code>log</code></a>: &#x6267;&#x884C;&#x67D0;&#x5F02;&#x6B65;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x8BB0;&#x5F55;&#x5B83;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x3002;</li>
<li><a href="#util.js"><code>dir</code></a>: &#x4E0E;log&#x7C7B;&#x4F3C;&#xFF0C;&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x5728;&#x4E8E;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x7684;console.dir()&#x51FD;&#x6570;&#xFF0C;&#x663E;&#x793A;&#x4E3A;DOM&#x89C6;&#x56FE;&#x3002;</li>
<li><a href="#util.js"><code>noConflict</code></a>: &#x5982;&#x679C;&#x4E4B;&#x524D;&#x5DF2;&#x7ECF;&#x5728;&#x5168;&#x5C40;&#x57DF;&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;async&#x53D8;&#x91CF;&#xFF0C;&#x5F53;&#x5BFC;&#x5165;&#x672C;async.js&#x65F6;&#xFF0C;&#x4F1A;&#x5148;&#x628A;&#x4E4B;&#x524D;&#x7684;async&#x53D8;&#x91CF;&#x4FDD;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x7136;&#x540E;&#x8986;&#x76D6;&#x5B83;&#x3002;&#x4EC5;&#x4EC5;&#x7528;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#xFF0C;&#x5728;nodejs&#x4E2D;&#x6CA1;&#x7528;&#xFF0C;&#x8FD9;&#x91CC;&#x65E0;&#x6CD5;&#x6F14;&#x793A;&#x3002;</li>
</ul>
<h2 id="&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h2><p><a name="apply"></a><br><br></p>
<h3 id="apply&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#apply&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="apply&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>apply</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * apply&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x597D;&#x7528;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x6211;&#x4EEC;&#x7ED9;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x9884;&#x7ED1;&#x5B9A;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#x5E76;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x53EF;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x7684;&#x65B0;&#x51FD;&#x6570;&#xFF0C;&#x7B80;&#x5316;&#x4EE3;&#x7801;&#x3002;
 *
 * function(callback) { t.inc(3, callback); }
 * &#x7B49;&#x4EF7;&#x4E8E;&#xFF1A;
 * async.apply(t.inc, 3);
 */</span>
<span class="token comment" spellcheck="true">// apply(function, arguments..)</span>

<span class="token comment" spellcheck="true">/**
 * &#x901A;&#x8FC7;&#x540D;&#x5B57;&#x7ED1;&#x5B9A;&#x51FD;&#x6570;t.inc, t.fire&#xFF0C;&#x4F5C;&#x4E3A;&#x65B0;&#x51FD;&#x6570;&#x7ED9;parallel&#x8C03;&#x7528;
 */</span>
<span class="token comment" spellcheck="true">//1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>inc<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>fire<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//58.605&gt; 1.1 err: null</span>
<span class="token comment" spellcheck="true">//58.613&gt; 1.1 results: [ 4, 100 ]</span>

<span class="token comment" spellcheck="true">/**
 * &#x6784;&#x9020;&#x4E00;&#x4E2A;&#x52A0;&#x6CD5;&#x51FD;&#x6570;&#xFF0C;&#x901A;&#x8FC7;apply&#x7B80;&#x5316;&#x4EE3;&#x7801;
 */</span>
<span class="token comment" spellcheck="true">//1.2</span>
<span class="token keyword">function</span> <span class="token function">inc</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>callback<span class="token punctuation">,</span>timeout<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> timeout <span class="token operator">=</span> timeout <span class="token operator">||</span> <span class="token number">200</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> a<span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>inc<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 inc: &apos;</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//58.616&gt; 1.2 inc: 3</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="applyEach"></a><br><br></p>
<h3 id="applyEach&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#applyEach&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="applyEach&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>applyEach</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
* applyEach&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x7ED9;&#x4E00;&#x6570;&#x7EC4;&#x4E2D;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x4F20;&#x76F8;&#x540C;&#x53C2;&#x6570;&#xFF0C;&#x901A;&#x8FC7;callback&#x8FD4;&#x56DE;&#x3002;
* &#x5982;&#x679C;&#x53EA;&#x4F20;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5C06;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5BF9;&#x8C61;&#xFF0C;&#x6211;&#x53EF;&#x4EE5;&#x4F20;&#x53C2;&#x8C03;&#x7528;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// applyEach(fns, args..., callback)</span>

<span class="token comment" spellcheck="true">/**
 * &#x5F02;&#x6B65;&#x6267;&#x884C;&#xFF0C;&#x7ED9;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4ED6;&#x4EEC;&#x6709;&#x76F8;&#x540C;&#x7684;&#x53C2;&#x6570;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">//1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">applyEach</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.1 handler: &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot; A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.1 handler: &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot; B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&apos;Hello&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//06.739&gt; 1.1 handler: Hello B</span>
<span class="token comment" spellcheck="true">//07.079&gt; 1.1 handler: Hello A</span>
<span class="token comment" spellcheck="true">//07.080&gt; 1.1 err: null</span>

<span class="token comment" spellcheck="true">/**
 *  &#x5F02;&#x6B65;&#x6267;&#x884C;&#xFF0C;&#x5F53;&#x53EA;&#x8BBE;&#x7F6E;&#x7B2C;&#x4E00;&#x53C2;&#x6570;&#x540E;&#xFF0C;&#x5F97;&#x5230;&#x51FD;&#x6570;&#x5BF9;&#x8C61;&#xFF0C;&#x518D;&#x4F20;&#x53C2;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">//1.2</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">applyEach</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.2 handler: &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot; A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.2 handler: &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot; B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">&quot;simgle&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;err: &apos;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//29.351&gt; 1.2 handler: simgle B</span>
<span class="token comment" spellcheck="true">//29.688&gt; 1.2 handler: simgle A</span>

<span class="token comment" spellcheck="true">/**
 *   applyEachSeries&#x4E0E;applyEach&#x552F;&#x4E00;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x6570;&#x7EC4;&#x7684;&#x51FD;&#x6570;&#x540C;&#x6B65;&#x6267;&#x884C;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">//applyEachSeries(arr, args..., callback)</span>
<span class="token comment" spellcheck="true">//1.3</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">applyEachSeries</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.3 handler: &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot; A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.3 handler: &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot; B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//10.669&gt; 1.3 handler: aaa A</span>
<span class="token comment" spellcheck="true">//10.831&gt; 1.3 handler: aaa B</span>
<span class="token comment" spellcheck="true">//10.834&gt; 1.3 err: null</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="auto"></a><br><br></p>
<h3 id="auto&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#auto&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="auto&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>auto</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * auto&#x7528;&#x6765;&#x5904;&#x7406;&#x6709;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7684;&#x591A;&#x4E2A;&#x4EFB;&#x52A1;&#x7684;&#x6267;&#x884C;&#x3002;
 *
 * &#x6BD4;&#x5982;&#x67D0;&#x4E9B;&#x4EFB;&#x52A1;&#x4E4B;&#x95F4;&#x5F7C;&#x6B64;&#x72EC;&#x7ACB;&#xFF0C;&#x53EF;&#x4EE5;&#x5E76;&#x884C;&#x6267;&#x884C;&#xFF1B;&#x4F46;&#x67D0;&#x4E9B;&#x4EFB;&#x52A1;&#x4F9D;&#x8D56;&#x4E8E;&#x5176;&#x5B83;&#x67D0;&#x4E9B;&#x4EFB;&#x52A1;&#xFF0C;&#x53EA;&#x80FD;&#x7B49;&#x90A3;&#x4E9B;&#x4EFB;&#x52A1;&#x5B8C;&#x6210;&#x540E;&#x624D;&#x80FD;&#x6267;&#x884C;&#x3002;
 * &#x867D;&#x7136;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;parallel&#x548C;series&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x5B9E;&#x73B0;&#x8BE5;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x4EFB;&#x52A1;&#x4E4B;&#x95F4;&#x5173;&#x7CFB;&#x590D;&#x6742;&#xFF0C;&#x5219;&#x4EE3;&#x7801;&#x4F1A;&#x76F8;&#x5F53;&#x590D;&#x6742;&#xFF0C;&#x4EE5;&#x540E;&#x5982;&#x679C;&#x60F3;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x4EFB;&#x52A1;&#xFF0C;&#x4E5F;&#x4F1A;&#x5F88;&#x9EBB;&#x70E6;&#x3002;
 * &#x8FD9;&#x65F6;&#x4F7F;&#x7528;auto&#xFF0C;&#x5219;&#x4F1A;&#x4E8B;&#x534A;&#x529F;&#x500D;&#x3002;
 *
 * &#x5982;&#x679C;&#x6709;&#x4EFB;&#x52A1;&#x4E2D;&#x9014;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x4F1A;&#x628A;&#x8BE5;&#x9519;&#x8BEF;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#xFF0C;&#x6240;&#x6709;&#x4EFB;&#x52A1;&#xFF08;&#x5305;&#x62EC;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x5B8C;&#x7684;&#xFF09;&#x4EA7;&#x751F;&#x7684;&#x6570;&#x636E;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#x3002;
 * &#x5982;&#x679C;&#x4E0D;&#x5173;&#x5FC3;&#x9519;&#x8BEF;&#x548C;&#x6700;&#x7EC8;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x5199;&#x6700;&#x540E;&#x90A3;&#x4E2A;callback&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// async.auto(tasks, [callback])</span>

<span class="token comment" spellcheck="true">/**
 * &#x6211;&#x8981;&#x5199;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#xFF0C;&#x5B83;&#x8981;&#x5B8C;&#x6210;&#x4EE5;&#x4E0B;&#x51E0;&#x4EF6;&#x4E8B;&#xFF1A;
 * 1. &#x4ECE;&#x67D0;&#x5904;&#x53D6;&#x5F97;&#x6570;&#x636E;
 * 2. &#x5728;&#x786C;&#x76D8;&#x4E0A;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x76EE;&#x5F55;
 * 3. &#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;&#x76EE;&#x5F55;&#x4E0B;&#x67D0;&#x6587;&#x4EF6;
 * 4. &#x53D1;&#x9001;&#x90AE;&#x4EF6;&#xFF0C;&#x5C06;&#x6587;&#x4EF6;&#x4EE5;&#x9644;&#x4EF6;&#x5F62;&#x5F0F;&#x53D1;&#x9001;&#x7ED9;&#x5176;&#x5B83;&#x4EBA;&#x3002;
 *
 * &#x5206;&#x6790;&#x8BE5;&#x4EFB;&#x52A1;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;1&#x4E0E;2&#x53EF;&#x4EE5;&#x5E76;&#x884C;&#x6267;&#x884C;&#xFF0C;3&#x9700;&#x8981;&#x7B49;1&#x548C;2&#x5B8C;&#x6210;&#xFF0C;4&#x8981;&#x7B49;3&#x5B8C;&#x6210;&#x3002;
 * &#x53EF;&#x4EE5;&#x6309;&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;&#x6765;&#x4F7F;&#x7528;auto&#x51FD;&#x6570;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">auto</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    getData<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1: got data&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&apos;mydata&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    makeFolder<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1: made folder&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&apos;myfolder&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    writeFile<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;getData&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;makeFolder&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1: wrote file&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&apos;myfile&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    emailFiles<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;writeFile&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1: emailed file: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">.</span>writeFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> results<span class="token punctuation">.</span>writeFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1: err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1: results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//1.1: made folder</span>
<span class="token comment" spellcheck="true">//1.1: got data</span>
<span class="token comment" spellcheck="true">//1.1: wrote file</span>
<span class="token comment" spellcheck="true">//20.120&gt; 1.1: emailed file: myfile</span>
<span class="token comment" spellcheck="true">//20.125&gt; 1.1: err: null</span>
<span class="token comment" spellcheck="true">//20.127&gt; 1.1: results: { makeFolder: &apos;myfolder&apos;,</span>
<span class="token comment" spellcheck="true">//    getData: &apos;mydata&apos;,</span>
<span class="token comment" spellcheck="true">//    writeFile: &apos;myfile&apos;,</span>
<span class="token comment" spellcheck="true">//    emailFiles: &apos;myfile&apos; }</span>



<span class="token comment" spellcheck="true">/**
* &#x5982;&#x679C;&#x4E2D;&#x9014;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x4F1A;&#x628A;&#x9519;&#x8BEF;&#x4EA4;&#x7ED9;&#x6700;&#x7EC8;callback&#xFF0C;&#x6267;&#x884C;&#x5B8C;&#x4EFB;&#x52A1;&#x7684;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#x3002;&#x672A;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x7684;&#x51FD;&#x6570;&#x503C;&#x88AB;&#x5FFD;&#x7565;
*/</span>
<span class="token comment" spellcheck="true">// 1.2</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">auto</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    getData<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2: got data&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&apos;mydata&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    makeFolder<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2: made folder&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&apos;myfolder&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    writeFile<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;getData&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;makeFolder&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2: wrote file&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    emailFiles<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;writeFile&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2: emailed file: &apos;</span> <span class="token operator">+</span> results<span class="token punctuation">.</span>writeFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;err sending email&apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">.</span>writeFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//1.2: made folder</span>
<span class="token comment" spellcheck="true">//1.2: got data</span>
<span class="token comment" spellcheck="true">//1.2: wrote file</span>
<span class="token comment" spellcheck="true">//51.399&gt; 1.2 err: myerr</span>
<span class="token comment" spellcheck="true">//51.401&gt; 1.2 results: { makeFolder: &apos;myfolder&apos;,</span>
<span class="token comment" spellcheck="true">//    getData: &apos;mydata&apos;,</span>
<span class="token comment" spellcheck="true">//    writeFile: undefined }</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="cargo"></a><br><br></p>
<h3 id="cargo&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#cargo&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="cargo&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>cargo</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * cargo&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x4E32;&#x884C;&#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;queue&#xFF0C;&#x901A;&#x8FC7;&#x9650;&#x5236;&#x4E86;worker&#x6570;&#x91CF;&#xFF0C;&#x4E0D;&#x518D;&#x4E00;&#x6B21;&#x6027;&#x5168;&#x90E8;&#x6267;&#x884C;&#x3002;
 * &#x5F53;worker&#x6570;&#x91CF;&#x4E0D;&#x591F;&#x7528;&#x65F6;&#xFF0C;&#x65B0;&#x52A0;&#x5165;&#x7684;&#x4EFB;&#x52A1;&#x5C06;&#x4F1A;&#x6392;&#x961F;&#x7B49;&#x5019;&#xFF0C;&#x76F4;&#x5230;&#x6709;&#x65B0;&#x7684;worker&#x53EF;&#x7528;&#x3002;
 *
 * cargo&#x7684;&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x5728;&#x4E8E;&#xFF0C;cargo&#x6BCF;&#x6B21;&#x4F1A;&#x52A0;&#x8F7D;&#x6EE1;&#x989D;&#x7684;&#x4EFB;&#x52A1;&#x505A;&#x4E3A;&#x4EFB;&#x52A1;&#x5355;&#x5143;&#xFF0C;&#x53EA;&#x6709;&#x4EFB;&#x52A1;&#x5355;&#x5143;&#x4E2D;&#x5168;&#x90E8;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x52A0;&#x8F7D;&#x65B0;&#x7684;&#x4EFB;&#x52A1;&#x5355;&#x5143;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// cargo(worker, [payload])</span>

<span class="token comment" spellcheck="true">/**
 * &#x521B;&#x5EFA;cargo&#x5B9E;&#x4F8B;
 */</span>
<span class="token keyword">var</span> cargo <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">cargo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>tasks<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>tasks<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;start &apos;</span> <span class="token operator">+</span> tasks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment" spellcheck="true">/**
 * &#x76D1;&#x542C;&#xFF1A;&#x5982;&#x679C;&#x67D0;&#x6B21;push&#x64CD;&#x4F5C;&#x540E;&#xFF0C;&#x4EFB;&#x52A1;&#x6570;&#x5C06;&#x8FBE;&#x5230;&#x6216;&#x8D85;&#x8FC7;worker&#x6570;&#x91CF;&#x65F6;&#xFF0C;&#x5C06;&#x8C03;&#x7528;&#x8BE5;&#x51FD;&#x6570;
 */</span>
cargo<span class="token punctuation">.</span>saturated <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;all workers to be used&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/**
 * &#x76D1;&#x542C;&#xFF1A;&#x5F53;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x4EA4;&#x7ED9;worker&#x65F6;&#xFF0C;&#x5C06;&#x8C03;&#x7528;&#x8BE5;&#x51FD;&#x6570;
 */</span>
cargo<span class="token punctuation">.</span>empty <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;no more tasks wating&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/**
 * &#x76D1;&#x542C;&#xFF1A;&#x5F53;&#x6240;&#x6709;&#x4EFB;&#x52A1;&#x90FD;&#x6267;&#x884C;&#x5B8C;&#x4EE5;&#x540E;&#xFF0C;&#x5C06;&#x8C03;&#x7528;&#x8BE5;&#x51FD;&#x6570;
 */</span>
cargo<span class="token punctuation">.</span>drain <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;all tasks have been processed&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/**
 * &#x589E;&#x52A0;&#x65B0;&#x4EFB;&#x52A1;
 */</span>
cargo<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&apos;A&apos;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;finished processing A&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cargo<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&apos;B&apos;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;finished processing B&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cargo<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&apos;C&apos;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;finished processing C&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cargo<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&apos;D&apos;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;finished processing D&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cargo<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&apos;E&apos;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;finished processing E&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//40.016&gt; all workers to be used</span>
<span class="token comment" spellcheck="true">//40.020&gt; no more tasks wating</span>
<span class="token comment" spellcheck="true">//40.020&gt; start A</span>
<span class="token comment" spellcheck="true">//40.020&gt; start B</span>
<span class="token comment" spellcheck="true">//40.322&gt; finished processing A</span>
<span class="token comment" spellcheck="true">//40.923&gt; finished processing B</span>
<span class="token comment" spellcheck="true">//40.923&gt; no more tasks wating</span>
<span class="token comment" spellcheck="true">//40.924&gt; start C</span>
<span class="token comment" spellcheck="true">//40.924&gt; start D</span>
<span class="token comment" spellcheck="true">//41.425&gt; finished processing C</span>
<span class="token comment" spellcheck="true">//41.526&gt; finished processing D</span>
<span class="token comment" spellcheck="true">//41.526&gt; no more tasks wating</span>
<span class="token comment" spellcheck="true">//41.527&gt; start E</span>
<span class="token comment" spellcheck="true">//41.728&gt; finished processing E</span>
<span class="token comment" spellcheck="true">//41.728&gt; all tasks have been processed</span>
<span class="token comment" spellcheck="true">//41.729&gt; all tasks have been processed</span>
<span class="token comment" spellcheck="true">//41.729&gt; all tasks have been processed</span>
<span class="token comment" spellcheck="true">//41.729&gt; all tasks have been processed</span>
<span class="token comment" spellcheck="true">//41.730&gt; all tasks have been processed</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="compose"></a><br><br></p>
<h3 id="compose&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#compose&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="compose&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>compose</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5305;&#x62EC;&#x4E00;&#x7EC4;&#x5F02;&#x6B65;&#x51FD;&#x6570;&#x7684;&#x51FD;&#x6570;&#x96C6;&#x5408;&#xFF0C;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x4F1A;&#x6D88;&#x8D39;&#x4E0A;&#x4E00;&#x6B21;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x3002;
 * &#x628A;f(),g(),h()&#x5F02;&#x6B65;&#x51FD;&#x6570;&#xFF0C;&#x7EC4;&#x5408;&#x6210;f(g(h()))&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x901A;&#x8FC7;callback&#x5F97;&#x5230;&#x8FD4;&#x56DE;&#x503C;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// compose(fn1, fn2...)</span>

<span class="token comment" spellcheck="true">/**
 * &#x901A;&#x8FC7;compose&#x7EC4;&#x5408;&#xFF0C;f(g(h()))&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x4ECE;&#x5185;&#x5C42;&#x5230;&#x5916;&#x5C42;&#x7684;&#x6267;&#x884C;&#x7684;&#x987A;&#x5E8F;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">//1.1</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1.f enter: &apos;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1.g enter: &apos;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> n <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">h</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1.h enter: &apos;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fgh <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">compose</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span>g<span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fgh</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//05.307&gt; 1.1.h enter: 4</span>
<span class="token comment" spellcheck="true">//05.329&gt; 1.1.g enter: -6</span>
<span class="token comment" spellcheck="true">//05.341&gt; 1.1.f enter: -12</span>
<span class="token comment" spellcheck="true">//05.361&gt; 1.1 err: null</span>
<span class="token comment" spellcheck="true">//05.362&gt; 1.1 result: -11</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="concat"></a><br><br></p>
<h3 id="concat&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#concat&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="concat&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>concat</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x5C06;&#x591A;&#x4E2A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x7684;&#x7ED3;&#x679C;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// concat(arr, iterator(item,callback(err,result)), callback(err,result))</span>

<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    aaa<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    bbb<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    ccc<span class="token punctuation">:</span> <span class="token number">66</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> keys <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&apos;aaa&apos;</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&apos;bbb&apos;</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">&apos;ccc&apos;</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x4EE5;&#x5E76;&#x884C;&#x65B9;&#x5F0F;&#x5BF9;&#x96C6;&#x5408;&#x4E2D;&#x5404;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x4F20;&#x7ED9;&#x6700;&#x540E;&#x7684;callback&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span>key<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> key<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 values: &apos;</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 13.539&gt; 1.1 err:</span>
<span class="token comment" spellcheck="true">// 13.539&gt; 1.1 values: [ 44, 55, 66, 11, 22, 33 ]</span>

<span class="token comment" spellcheck="true">/**
 * &#x5982;&#x679C;&#x4E2D;&#x9014;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x628A;&#x9519;&#x8BEF;&#x4EE5;&#x53CA;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x7684;&#x64CD;&#x4F5C;&#x7684;&#x7ED3;&#x679C;&#x4EA4;&#x7ED9;&#x6700;&#x540E;callback&#x3002;&#x672A;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x5219;&#x5FFD;&#x7565;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.2</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span>name<span class="token operator">===</span><span class="token string">&apos;ccc&apos;</span><span class="token punctuation">)</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span>key<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> key<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 values: &apos;</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 13.439&gt; 1.2 err: myerr</span>
<span class="token comment" spellcheck="true">// 13.439&gt; 1.2 values: [ 44, 55 ]</span>

<span class="token comment" spellcheck="true">/**
 * &#x6309;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x987A;&#x5E8F;&#x6765;&#x6267;&#x884C;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x4E00;&#x4E2A;&#x5B8C;&#x6210;&#x540E;&#x624D;&#x5BF9;&#x4E0B;&#x4E00;&#x4E2A;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x6240;&#x6709;&#x7ED3;&#x679C;&#x4F1A;&#x6C47;&#x96C6;&#x6210;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x4EA4;&#x7ED9;&#x6700;&#x540E;&#x7684;callback&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// concatSeries(arr, iterator, callback)</span>

<span class="token comment" spellcheck="true">// 1.3</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">concatSeries</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span>key<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> key<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 values: &apos;</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 13.859&gt; 1.3 err:</span>
<span class="token comment" spellcheck="true">// 13.859&gt; 1.3 values: [ 11, 22, 33, 44, 55, 66 ]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="detect"></a><br><br></p>
<h3 id="detect&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#detect&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="detect&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>detect</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x7528;&#x4E8E;&#x53D6;&#x5F97;&#x96C6;&#x5408;&#x4E2D;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;
 * &#x5B83;&#x5206;&#x4E3A;&#x5E76;&#x884C;&#x4E0E;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x51FD;&#x6570;detect&#x548C;detectSeries&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// detect(array, iterator(item,callback(test)), callback(result)</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>value<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>delay<span class="token punctuation">:</span><span class="token number">500</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span>delay<span class="token punctuation">:</span><span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span>delay<span class="token punctuation">:</span><span class="token number">300</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 *  &#x5E76;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x901A;&#x8FC7;t.inc&#x505A;&#x4E00;&#x4E2A;&#x7D2F;&#x52A0;&#x5668;&#xFF0C;&#x5F97;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;&#x7ED3;&#x679C;&#x5BF9;&#x8C61;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">detect</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 enter: &apos;</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 handle: &apos;</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>n<span class="token operator">%</span><span class="token number">2</span><span class="token operator">===</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 09.928&gt; 1.1 enter: 1</span>
<span class="token comment" spellcheck="true">// 09.928&gt; 1.1 enter: 2</span>
<span class="token comment" spellcheck="true">// 09.928&gt; 1.1 enter: 3</span>
<span class="token comment" spellcheck="true">// 10.138&gt; 1.1 handle: 2</span>
<span class="token comment" spellcheck="true">// 10.228&gt; 1.1 handle: 3</span>
<span class="token comment" spellcheck="true">// 10.228&gt; 1.1 result: { value: 3, delay: 300 }</span>
<span class="token comment" spellcheck="true">// 10.438&gt; 1.1 handle: 1</span>
<span class="token comment" spellcheck="true">// 10.438&gt; 1.1 handle: 1</span>

<span class="token comment" spellcheck="true">/**
 *  &#x4E32;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x901A;&#x8FC7;t.inc&#x505A;&#x4E00;&#x4E2A;&#x7D2F;&#x52A0;&#x5668;&#xFF0C;&#x5F97;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;&#x7ED3;&#x679C;&#x5BF9;&#x8C61;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">detectSeries</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 enter: &apos;</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 handle: &apos;</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>n<span class="token operator">%</span><span class="token number">2</span><span class="token operator">===</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 09.928&gt; 1.2 enter: 1</span>
<span class="token comment" spellcheck="true">// 10.438&gt; 1.2 result: { value: 1, delay: 500 }</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="each"></a><br><br></p>
<h3 id="each&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#each&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="each&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>each</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x5982;&#x679C;&#x60F3;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;&#x90FD;&#x6267;&#x884C;&#x540C;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x4EE5;&#x5229;&#x7528;each&#x51FD;&#x6570;&#x3002;
 *
 * async&#x63D0;&#x4F9B;&#x4E86;&#x4E09;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;
 * 1. &#x96C6;&#x5408;&#x4E2D;&#x6240;&#x6709;&#x5143;&#x7D20;&#x5E76;&#x884C;&#x6267;&#x884C;
 * 2. &#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x987A;&#x5E8F;&#x6267;&#x884C;
 * 3. &#x5206;&#x6279;&#x6267;&#x884C;&#xFF0C;&#x540C;&#x4E00;&#x6279;&#x5185;&#x5E76;&#x884C;&#xFF0C;&#x6279;&#x4E0E;&#x6279;&#x4E4B;&#x95F4;&#x6309;&#x987A;&#x5E8F;
 *
 * &#x5982;&#x679C;&#x4E2D;&#x9014;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x9519;&#x8BEF;&#x5C06;&#x4E0A;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;&#x7684;callback&#x5904;&#x7406;&#x3002;&#x5176;&#x5B83;&#x5DF2;&#x7ECF;&#x542F;&#x52A8;&#x7684;&#x4EFB;&#x52A1;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF0C;&#x672A;&#x542F;&#x52A8;&#x7684;&#x5FFD;&#x7565;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// each(arr, iterator(item, callback), callback(err))</span>


<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&apos;Jack&apos;</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&apos;Mike&apos;</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&apos;Freewind&apos;</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x6240;&#x6709;&#x64CD;&#x4F5C;&#x5E76;&#x53D1;&#x6267;&#x884C;&#xFF0C;&#x4E14;&#x5168;&#x90E8;&#x672A;&#x51FA;&#x9519;&#xFF0C;&#x6700;&#x7EC8;&#x5F97;&#x5230;&#x7684;err&#x4E3A;undefined&#x3002;&#x6CE8;&#x610F;&#x6700;&#x7EC8;callback&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;err&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// &#x8F93;&#x51FA;&#x5982;&#x4E0B;&#xFF1A;</span>
<span class="token comment" spellcheck="true">// 42.244&gt; 1.1 enter: Jack</span>
<span class="token comment" spellcheck="true">// 42.245&gt; 1.1 enter: Mike</span>
<span class="token comment" spellcheck="true">// 42.245&gt; 1.1 enter: Freewind</span>
<span class="token comment" spellcheck="true">// 42.350&gt; 1.1 handle: Mike</span>
<span class="token comment" spellcheck="true">// 42.445&gt; 1.1 handle: Jack</span>
<span class="token comment" spellcheck="true">// 42.554&gt; 1.1 handle: Freewind</span>
<span class="token comment" spellcheck="true">// 42.554&gt; 1.1 err: undefined</span>


<span class="token comment" spellcheck="true">/**
 * &#x5982;&#x679C;&#x4E2D;&#x9014;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x51FA;&#x9519;&#x540E;&#x9A6C;&#x4E0A;&#x8C03;&#x7528;&#x6700;&#x7EC8;&#x7684;callback&#x3002;&#x5176;&#x5B83;&#x672A;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x4EFB;&#x52A1;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x3002;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 enter: &apos;</span> <span class="token operator">+</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token operator">===</span><span class="token string">&apos;Jack&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// &#x8F93;&#x51FA;&#x5982;&#x4E0B;&#xFF1A;</span>
<span class="token comment" spellcheck="true">// 42.246&gt; 1.2 enter: Jack</span>
<span class="token comment" spellcheck="true">// 42.246&gt; 1.2 enter: Mike</span>
<span class="token comment" spellcheck="true">// 42.246&gt; 1.2 enter: Freewind</span>
<span class="token comment" spellcheck="true">// 42.350&gt; 1.2 handle: Mike</span>
<span class="token comment" spellcheck="true">// 42.445&gt; 1.2 handle: Jack</span>
<span class="token comment" spellcheck="true">// 42.446&gt; 1.2 err: myerr</span>
<span class="token comment" spellcheck="true">// 42.555&gt; 1.2 handle: Freewind</span>

<span class="token comment" spellcheck="true">/**
 * &#x4E0E;each&#x76F8;&#x4F3C;&#xFF0C;&#x4F46;&#x4E0D;&#x662F;&#x5E76;&#x884C;&#x6267;&#x884C;&#x3002;&#x800C;&#x662F;&#x4E00;&#x4E2A;&#x4E2A;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x3002;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">eachSeries</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 err: &apos;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 42.247&gt; 1.3 enter: Jack</span>
<span class="token comment" spellcheck="true">// 42.459&gt; 1.3 handle: Jack</span>
<span class="token comment" spellcheck="true">// 42.459&gt; 1.3 enter: Mike</span>
<span class="token comment" spellcheck="true">// 42.569&gt; 1.3 handle: Mike</span>
<span class="token comment" spellcheck="true">// 42.569&gt; 1.3 enter: Freewind</span>
<span class="token comment" spellcheck="true">// 42.883&gt; 1.3 handle: Freewind</span>
<span class="token comment" spellcheck="true">// 42.883&gt; 1.3 err: undefined</span>

<span class="token comment" spellcheck="true">/**
 * &#x5982;&#x679C;&#x4E2D;&#x9014;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x9A6C;&#x4E0A;&#x628A;&#x9519;&#x8BEF;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;&#x7684;callback&#xFF0C;&#x8FD8;&#x672A;&#x6267;&#x884C;&#x7684;&#x4E0D;&#x518D;&#x6267;&#x884C;&#x3002;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">eachSeries</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 enter: &apos;</span> <span class="token operator">+</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token operator">===</span><span class="token string">&apos;Jack&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 err: &apos;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 42.247&gt; 1.4 enter: Jack</span>
<span class="token comment" spellcheck="true">// 42.460&gt; 1.4 handle: Jack</span>
<span class="token comment" spellcheck="true">// 42.460&gt; 1.4 err: myerr</span>

<span class="token comment" spellcheck="true">/**
 * &#x5206;&#x6279;&#x6267;&#x884C;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x6BCF;&#x4E00;&#x6279;&#x7684;&#x4E2A;&#x6570;&#x3002;&#x6BCF;&#x4E00;&#x6279;&#x5185;&#x5E76;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x4F46;&#x6279;&#x4E0E;&#x6279;&#x4E4B;&#x95F4;&#x6309;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x3002;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">eachLimit</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 err: &apos;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 42.247&gt; 1.5 enter: Jack</span>
<span class="token comment" spellcheck="true">// 42.248&gt; 1.5 enter: Mike</span>
<span class="token comment" spellcheck="true">// 42.351&gt; 1.5 handle: Mike</span>
<span class="token comment" spellcheck="true">// 42.352&gt; 1.5 enter: Freewind</span>
<span class="token comment" spellcheck="true">// 42.461&gt; 1.5 handle: Jack</span>
<span class="token comment" spellcheck="true">// 42.664&gt; 1.5 handle: Freewind</span>
<span class="token comment" spellcheck="true">// 42.664&gt; 1.5 err: undefined</span>

<span class="token comment" spellcheck="true">/**
 * &#x5982;&#x679C;&#x4E2D;&#x9014;&#x51FA;&#x9519;&#xFF0C;&#x9519;&#x8BEF;&#x5C06;&#x9A6C;&#x4E0A;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;&#x7684;callback&#x3002;&#x540C;&#x4E00;&#x6279;&#x4E2D;&#x7684;&#x672A;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x4EFB;&#x52A1;&#x8FD8;&#x5C06;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF0C;&#x4F46;&#x4E0B;&#x4E00;&#x6279;&#x53CA;&#x4EE5;&#x540E;&#x7684;&#x4E0D;&#x518D;&#x6267;&#x884C;&#x3002;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">eachLimit</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.6 enter: &apos;</span> <span class="token operator">+</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.6 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token operator">===</span><span class="token string">&apos;Jack&apos;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.6 err: &apos;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 42.248&gt; 1.6 enter: Jack</span>
<span class="token comment" spellcheck="true">// 42.248&gt; 1.6 enter: Mike</span>
<span class="token comment" spellcheck="true">// 42.352&gt; 1.6 handle: Mike</span>
<span class="token comment" spellcheck="true">// 42.462&gt; 1.6 handle: Jack</span>
<span class="token comment" spellcheck="true">// 42.462&gt; 1.6 err: myerr</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="every"></a><br><br></p>
<h3 id="every&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#every&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="every&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>every</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x5982;&#x679C;&#x96C6;&#x5408;&#x91CC;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#xFF0C;&#x5219;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;&#x56DE;&#x8C03;&#x7684;result&#x4E3A;true&#xFF0C;&#x5426;&#x5219;&#x4E3A;false
 */</span>
<span class="token comment" spellcheck="true">// every(arr, iterator(item,callback), callback(result))</span>
<span class="token comment" spellcheck="true">//alias: all</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x4E32;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x96C6;&#x5408;&#x4E2D;&#x6240;&#x6709;&#x7684;&#x5143;&#x7D20;&#x90FD;&lt;=10&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;true
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 enter: &apos;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 handle: &apos;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>item<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 32.113&gt; 1.1 enter: 1</span>
<span class="token comment" spellcheck="true">// 32.123&gt; 1.1 enter: 2</span>
<span class="token comment" spellcheck="true">// 32.123&gt; 1.1 enter: 3</span>
<span class="token comment" spellcheck="true">// 32.123&gt; 1.1 enter: 6</span>
<span class="token comment" spellcheck="true">// 32.233&gt; 1.1 handle: 1</span>
<span class="token comment" spellcheck="true">// 32.233&gt; 1.1 handle: 2</span>
<span class="token comment" spellcheck="true">// 32.233&gt; 1.1 handle: 3</span>
<span class="token comment" spellcheck="true">// 32.233&gt; 1.1 handle: 6</span>
<span class="token comment" spellcheck="true">// 32.233&gt; 1.1 result: true</span>

<span class="token comment" spellcheck="true">/**
 * &#x4E32;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x96C6;&#x5408;&#x4E2D;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4E0D;&#x5927;&#x4E8E;2&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;false
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 enter: &apos;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 handle: &apos;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>item<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 32.123&gt; 1.2 enter: 1</span>
<span class="token comment" spellcheck="true">// 32.123&gt; 1.2 enter: 2</span>
<span class="token comment" spellcheck="true">// 32.123&gt; 1.2 enter: 3</span>
<span class="token comment" spellcheck="true">// 32.123&gt; 1.2 enter: 6</span>
<span class="token comment" spellcheck="true">// 32.233&gt; 1.2 handle: 1</span>
<span class="token comment" spellcheck="true">// 32.233&gt; 1.2 result: false</span>
<span class="token comment" spellcheck="true">// 32.233&gt; 1.2 handle: 2</span>
<span class="token comment" spellcheck="true">// 32.233&gt; 1.2 handle: 3</span>
<span class="token comment" spellcheck="true">// 32.233&gt; 1.2 handle: 6</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="filter"></a><br><br><br><code>filter</code> &#x548C; <code>reject</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</p>
<pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x4F7F;&#x7528;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x5BF9;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x7B5B;&#x9009;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;iterator&#x7684;callback&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x53EA;&#x80FD;&#x63A5;&#x6536;true&#x6216;false&#x3002;
 *
 * &#x5BF9;&#x4E8E;&#x51FA;&#x9519;&#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x6CA1;&#x6709;&#x505A;&#x51FA;&#x4EFB;&#x4F55;&#x5904;&#x7406;&#xFF0C;&#x76F4;&#x63A5;&#x7531;nodejs&#x629B;&#x51FA;&#x3002;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x5BF9;Error&#x7684;&#x5904;&#x7406;&#x3002;
 *
 * async&#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;
 * 1. &#x5E76;&#x884C;&#x6267;&#x884C;&#xFF1A;filter
 * 2. &#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF1A;filterSereis
 */</span>
<span class="token comment" spellcheck="true">// filter(arr, iterator(item, callback(test)), callback(results))</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x5E76;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x5BF9;arr&#x8FDB;&#x884C;&#x7B5B;&#x9009;&#x3002;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 test: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>item<span class="token operator">&gt;=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//16.739&gt; 1.1 enter: 1</span>
<span class="token comment" spellcheck="true">//16.749&gt; 1.1 enter: 2</span>
<span class="token comment" spellcheck="true">//16.749&gt; 1.1 enter: 3</span>
<span class="token comment" spellcheck="true">//16.749&gt; 1.1 enter: 4</span>
<span class="token comment" spellcheck="true">//16.749&gt; 1.1 enter: 5</span>
<span class="token comment" spellcheck="true">//16.749&gt; 1.3 enter: 1</span>
<span class="token comment" spellcheck="true">//16.949&gt; 1.1 test: 1</span>
<span class="token comment" spellcheck="true">//16.949&gt; 1.1 test: 2</span>
<span class="token comment" spellcheck="true">//16.949&gt; 1.1 test: 3</span>
<span class="token comment" spellcheck="true">//16.949&gt; 1.1 test: 4</span>
<span class="token comment" spellcheck="true">//16.949&gt; 1.1 test: 5</span>
<span class="token comment" spellcheck="true">//16.949&gt; 1.1 results: [ 3, 4, 5 ]</span>


<span class="token comment" spellcheck="true">/**
* &#x5982;&#x679C;&#x51FA;&#x9519;&#xFF0C;&#x5C06;&#x4F1A;&#x7531;nodejs&#x629B;&#x51FA;&#xFF0C;&#x5BFC;&#x81F4;&#x51FA;&#x9519;&#x3002;&#x4E3A;&#x4FDD;&#x8BC1;&#x5176;&#x5B83;&#x4EE3;&#x7801;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#xFF0C;&#x6CE8;&#x91CA;&#x6389;&#x8BE5;&#x6D4B;&#x8BD5;&#x3002;
*
* try..catch&#xFF1A;&#x6293;&#x4E0D;&#x5230;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;
*/</span>
<span class="token comment" spellcheck="true">/*
async.filter(arr, function(item, callback) {
    log(&apos;1.2 enter: &apos; + item);
    setTimeout(function() {
        log(&apos;1.2 handle: &apos; + item);
        if(item===2) {
            throw new Error(&apos;myerr&apos;);
        }
        callback(item&gt;=3);
    }, 100);
}, function(results) {
    log(&apos;1.2 results: &apos;, results);
});
*/</span>

<span class="token comment" spellcheck="true">/**
* &#x4E32;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x5BF9;arr&#x8FDB;&#x884C;&#x7B5B;&#x9009;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// 1.3</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">filterSeries</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>item<span class="token operator">&gt;=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 16.749&gt; 1.3 enter: 1</span>
<span class="token comment" spellcheck="true">// 16.949&gt; 1.3 handle: 1</span>
<span class="token comment" spellcheck="true">// 16.949&gt; 1.3 enter: 2</span>
<span class="token comment" spellcheck="true">// 17.149&gt; 1.3 handle: 2</span>
<span class="token comment" spellcheck="true">// 17.149&gt; 1.3 enter: 3</span>
<span class="token comment" spellcheck="true">// 17.369&gt; 1.3 handle: 3</span>
<span class="token comment" spellcheck="true">// 17.369&gt; 1.3 enter: 4</span>
<span class="token comment" spellcheck="true">// 17.589&gt; 1.3 handle: 4</span>
<span class="token comment" spellcheck="true">// 17.589&gt; 1.3 enter: 5</span>
<span class="token comment" spellcheck="true">// 17.789&gt; 1.3 handle: 5</span>
<span class="token comment" spellcheck="true">// 17.789&gt; 1.3 results: [ 3, 4, 5 ]</span>
<span class="token comment" spellcheck="true">/*
* reject&#x8DDF;filter&#x6B63;&#x597D;&#x76F8;&#x53CD;&#xFF0C;&#x5F53;&#x6D4B;&#x8BD5;&#x4E3A;true&#x65F6;&#xFF0C;&#x629B;&#x5F03;&#x4E4B;
*/</span>
<span class="token comment" spellcheck="true">// reject(arr, iterator(item, callback(test)), callback(results)</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 test: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>item<span class="token operator">&gt;=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 31.359&gt; 1.4 enter: 1</span>
<span class="token comment" spellcheck="true">// 31.359&gt; 1.4 enter: 2</span>
<span class="token comment" spellcheck="true">// 31.359&gt; 1.4 enter: 3</span>
<span class="token comment" spellcheck="true">// 31.359&gt; 1.4 enter: 4</span>
<span class="token comment" spellcheck="true">// 31.359&gt; 1.4 enter: 5</span>
<span class="token comment" spellcheck="true">// 31.559&gt; 1.4 test: 1</span>
<span class="token comment" spellcheck="true">// 31.559&gt; 1.4 test: 2</span>
<span class="token comment" spellcheck="true">// 31.559&gt; 1.4 test: 3</span>
<span class="token comment" spellcheck="true">// 31.559&gt; 1.4 test: 4</span>
<span class="token comment" spellcheck="true">// 31.559&gt; 1.4 test: 5</span>
<span class="token comment" spellcheck="true">// 31.569&gt; 1.4 results: [ 1, 2 ]</span>


<span class="token comment" spellcheck="true">/**
 * &#x4E32;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x5BF9;arr&#x8FDB;&#x884C;&#x7B5B;&#x9009;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.3</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">rejectSeries</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>item<span class="token operator">&gt;=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//43.592&gt; 1.5 enter: 1</span>
<span class="token comment" spellcheck="true">//43.799&gt; 1.5 handle: 1</span>
<span class="token comment" spellcheck="true">//43.800&gt; 1.5 enter: 2</span>
<span class="token comment" spellcheck="true">//44.004&gt; 1.5 handle: 2</span>
<span class="token comment" spellcheck="true">//44.007&gt; 1.5 enter: 3</span>
<span class="token comment" spellcheck="true">//44.210&gt; 1.5 handle: 3</span>
<span class="token comment" spellcheck="true">//44.211&gt; 1.5 enter: 4</span>
<span class="token comment" spellcheck="true">//44.412&gt; 1.5 handle: 4</span>
<span class="token comment" spellcheck="true">//44.413&gt; 1.5 enter: 5</span>
<span class="token comment" spellcheck="true">//44.614&gt; 1.5 handle: 5</span>
<span class="token comment" spellcheck="true">//44.616&gt; 1.5 results: [ 1, 2 ]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="iterator"></a><br><br></p>
<h3 id="iterator&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#iterator&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="iterator&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>iterator</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x5C06;&#x4E00;&#x7EC4;&#x51FD;&#x6570;&#x5305;&#x88C5;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;iterator&#xFF0C;&#x521D;&#x6B21;&#x8C03;&#x7528;&#x6B64;iterator&#x65F6;&#xFF0C;&#x4F1A;&#x6267;&#x884C;&#x5B9A;&#x4E49;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5E76;&#x8FD4;&#x56DE;&#x7B2C;&#x4E8C;&#x4E2A;&#x51FD;&#x6570;&#x4EE5;&#x4F9B;&#x8C03;&#x7528;&#x3002;
 * &#x4E5F;&#x53EF;&#x901A;&#x8FC7;&#x624B;&#x52A8;&#x8C03;&#x7528; next() &#x5F97;&#x5230;&#x4EE5;&#x4E0B;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4E3A;&#x8D77;&#x70B9;&#x7684;&#x65B0;&#x7684;iterator&#x3002;
 * &#x8BE5;&#x51FD;&#x6570;&#x901A;&#x5E38;&#x7531;async&#x5728;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x9700;&#x8981;&#x65F6;&#xFF0C;&#x4E5F;&#x53EF;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x5B83;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// async.iterator(tasks)</span>

<span class="token keyword">var</span> iter <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;I am 111&apos;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;I am 222&apos;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;I am 333&apos;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
* &#x76F4;&#x63A5;&#x8C03;&#x7528;()&#xFF0C;&#x4F1A;&#x6267;&#x884C;&#x5F53;&#x524D;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7531;&#x4E0B;&#x4E2A;&#x51FD;&#x6570;&#x4E3A;&#x8D77;&#x70B9;&#x7684;&#x65B0;&#x7684;iterator
*/</span>
<span class="token comment" spellcheck="true">//1.1</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 iter()&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> it1 <span class="token operator">=</span> <span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">it1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">it1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//28.368&gt; 1.1 iter()</span>
<span class="token comment" spellcheck="true">//28.371&gt; I am 111</span>
<span class="token comment" spellcheck="true">//28.372&gt; I am 222</span>
<span class="token comment" spellcheck="true">//28.372&gt; I am 222</span>

<span class="token comment" spellcheck="true">/**
* &#x901A;&#x8FC7;iter()&#x6765;&#x8C03;&#x7528;&#x4E0B;&#x4E00;&#x4E2A;&#x51FD;&#x6570;
*/</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 iter()&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> it2 <span class="token operator">=</span> <span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> it3 <span class="token operator">=</span> <span class="token function">it2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> it4 <span class="token operator">=</span> <span class="token function">it3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//it4(); // &#x8FD9;&#x53E5;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x4F1A;&#x62A5;&#x9519;</span>
<span class="token function">log</span><span class="token punctuation">(</span>it4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// =&gt; &apos;null&apos;</span>
<span class="token comment" spellcheck="true">//32.449&gt; 1.2 iter()</span>
<span class="token comment" spellcheck="true">//32.452&gt; I am 111</span>
<span class="token comment" spellcheck="true">//32.452&gt; I am 222</span>
<span class="token comment" spellcheck="true">//32.453&gt; I am 333</span>
<span class="token comment" spellcheck="true">//32.454&gt; null</span>

<span class="token comment" spellcheck="true">/**
 * &#x8C03;&#x7528;next()&#xFF0C;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#x5F53;&#x524D;&#x51FD;&#x6570;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x7531;&#x4E0B;&#x4E2A;&#x51FD;&#x6570;&#x4E3A;&#x8D77;&#x70B9;&#x7684;&#x65B0;iterator
 * &#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;iterator&#xFF0C;&#x591A;&#x6B21;&#x8C03;&#x7528;next()&#xFF0C;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x81EA;&#x5DF1;
 */</span>
<span class="token comment" spellcheck="true">//1.3</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 iter()&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> it5 <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">it5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> it6 <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">it6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//39.895&gt; 1.3 iter()</span>
<span class="token comment" spellcheck="true">//39.898&gt; I am 222</span>
<span class="token comment" spellcheck="true">//39.899&gt; I am 333</span>
<span class="token comment" spellcheck="true">//39.899&gt; I am 111</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="map"></a><br><br></p>
<h3 id="map&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#map&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="map&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>map</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x5BF9;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x6267;&#x884C;&#x67D0;&#x4E2A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x5F97;&#x5230;&#x7ED3;&#x679C;&#x3002;&#x6240;&#x6709;&#x7684;&#x7ED3;&#x679C;&#x5C06;&#x6C47;&#x603B;&#x5230;&#x6700;&#x7EC8;&#x7684;callback&#x91CC;&#x3002;&#x4E0E;each&#x7684;&#x533A;&#x522B;&#x662F;&#xFF0C;each&#x53EA;&#x5173;&#x5FC3;&#x64CD;&#x4F5C;&#x4E0D;&#x7BA1;&#x6700;&#x540E;&#x7684;&#x503C;&#xFF0C;&#x800C;map&#x5173;&#x5FC3;&#x7684;&#x6700;&#x540E;&#x4EA7;&#x751F;&#x7684;&#x503C;&#x3002;
 *
 * &#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;
 * 1. &#x5E76;&#x884C;&#x6267;&#x884C;&#x3002;&#x540C;&#x65F6;&#x5BF9;&#x96C6;&#x5408;&#x4E2D;&#x6240;&#x6709;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x7ED3;&#x679C;&#x6C47;&#x603B;&#x5230;&#x6700;&#x7EC8;callback&#x91CC;&#x3002;&#x5982;&#x679C;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x7ACB;&#x523B;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x4EE5;&#x53CA;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x4EFB;&#x52A1;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x672A;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x5360;&#x4E2A;&#x7A7A;&#x4F4D;
 * 2. &#x987A;&#x5E8F;&#x6267;&#x884C;&#x3002;&#x5BF9;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x7ED3;&#x679C;&#x6C47;&#x603B;&#x5230;&#x6700;&#x7EC8;callback&#x91CC;&#x3002;&#x5982;&#x679C;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x7ACB;&#x523B;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x4EE5;&#x53CA;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x672A;&#x6267;&#x884C;&#x7684;&#x88AB;&#x5FFD;&#x7565;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// map(arr, iterator(item, callback), callback(err, results))</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&apos;Jack&apos;</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span><span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&apos;Mike&apos;</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&apos;Freewind&apos;</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span><span class="token number">300</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&apos;Test&apos;</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x6240;&#x6709;&#x64CD;&#x4F5C;&#x5747;&#x6B63;&#x786E;&#x6267;&#x884C;&#xFF0C;&#x672A;&#x51FA;&#x9519;&#x3002;&#x6240;&#x6709;&#x7ED3;&#x679C;&#x6309;&#x5143;&#x7D20;&#x987A;&#x5E8F;&#x6C47;&#x603B;&#x7ED9;&#x6700;&#x7EC8;&#x7684;callback&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&apos;!!!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 54.569&gt; 1.1 enter: Jack</span>
<span class="token comment" spellcheck="true">// 54.569&gt; 1.1 enter: Mike</span>
<span class="token comment" spellcheck="true">// 54.569&gt; 1.1 enter: Freewind</span>
<span class="token comment" spellcheck="true">// 54.569&gt; 1.1 enter: Test</span>
<span class="token comment" spellcheck="true">// 54.629&gt; 1.1 handle: Test</span>
<span class="token comment" spellcheck="true">// 54.679&gt; 1.1 handle: Mike</span>
<span class="token comment" spellcheck="true">// 54.789&gt; 1.1 handle: Jack</span>
<span class="token comment" spellcheck="true">// 54.879&gt; 1.1 handle: Freewind</span>
<span class="token comment" spellcheck="true">// 54.879&gt; 1.1 err:</span>
<span class="token comment" spellcheck="true">// 54.879&gt; 1.1 results: [ &apos;Jack!!!&apos;, &apos;Mike!!!&apos;, &apos;Freewind!!!&apos;, &apos;Test!!!&apos; ]</span>

<span class="token comment" spellcheck="true">/**
*  &#x5982;&#x679C;&#x4E2D;&#x9014;&#x51FA;&#x9519;&#xFF0C;&#x7ACB;&#x523B;&#x5C06;&#x9519;&#x8BEF;&#x3001;&#x4EE5;&#x53CA;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x7684;&#x7ED3;&#x679C;&#x6C47;&#x603B;&#x7ED9;&#x6700;&#x7EC8;callback&#x3002;&#x672A;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x5C06;&#x4F1A;&#x5728;&#x7ED3;&#x679C;&#x6570;&#x7EC4;&#x4E2D;&#x7528;&#x5360;&#x4E2A;&#x7A7A;&#x4F4D;&#x3002;
*/</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token operator">===</span><span class="token string">&apos;Jack&apos;</span><span class="token punctuation">)</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">&apos;!!!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 54.569&gt; 1.2 enter: Jack</span>
<span class="token comment" spellcheck="true">// 54.569&gt; 1.2 enter: Mike</span>
<span class="token comment" spellcheck="true">// 54.569&gt; 1.2 enter: Freewind</span>
<span class="token comment" spellcheck="true">// 54.569&gt; 1.2 enter: Test</span>
<span class="token comment" spellcheck="true">// 54.629&gt; 1.2 handle: Test</span>
<span class="token comment" spellcheck="true">// 54.679&gt; 1.2 handle: Mike</span>
<span class="token comment" spellcheck="true">// 54.789&gt; 1.2 handle: Jack</span>
<span class="token comment" spellcheck="true">// 54.789&gt; 1.2 err: myerr</span>
<span class="token comment" spellcheck="true">// 54.789&gt; 1.2 results: [ undefined, &apos;Mike!!!&apos;, , &apos;Test!!!&apos; ]</span>
<span class="token comment" spellcheck="true">// 54.879&gt; 1.2 handle: Freewind</span>

<span class="token comment" spellcheck="true">/**
* &#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF0C;&#x4E00;&#x4E2A;&#x5B8C;&#x4E86;&#x624D;&#x6267;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x3002;
*/</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">mapSeries</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">&apos;!!!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 54.569&gt; 1.3 enter: Jack</span>
<span class="token comment" spellcheck="true">// 54.789&gt; 1.3 handle: Jack</span>
<span class="token comment" spellcheck="true">// 54.789&gt; 1.3 enter: Mike</span>
<span class="token comment" spellcheck="true">// 54.899&gt; 1.3 handle: Mike</span>
<span class="token comment" spellcheck="true">// 54.899&gt; 1.3 enter: Freewind</span>
<span class="token comment" spellcheck="true">// 55.209&gt; 1.3 handle: Freewind</span>
<span class="token comment" spellcheck="true">// 55.209&gt; 1.3 enter: Test</span>
<span class="token comment" spellcheck="true">// 55.269&gt; 1.3 handle: Test</span>
<span class="token comment" spellcheck="true">// 55.269&gt; 1.3 err:</span>
<span class="token comment" spellcheck="true">// 55.269&gt; 1.3 results: [ &apos;Jack!!!&apos;, &apos;Mike!!!&apos;, &apos;Freewind!!!&apos;, &apos;Test!!!&apos; ]</span>

<span class="token comment" spellcheck="true">/**
* &#x987A;&#x5E8F;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x51FA;&#x9519;&#xFF0C;&#x53EA;&#x628A;&#x9519;&#x8BEF;&#x4EE5;&#x53CA;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#xFF0C;&#x672A;&#x6267;&#x884C;&#x7684;&#x5FFD;&#x7565;&#x3002;
*/</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">mapSeries</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token operator">===</span><span class="token string">&apos;Mike&apos;</span><span class="token punctuation">)</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">&apos;!!!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 47.616&gt; 1.4 enter: Jack</span>
<span class="token comment" spellcheck="true">// 47.821&gt; 1.4 handle: Jack</span>
<span class="token comment" spellcheck="true">// 47.821&gt; 1.4 enter: Mike</span>
<span class="token comment" spellcheck="true">// 47.931&gt; 1.4 handle: Mike</span>
<span class="token comment" spellcheck="true">// 47.931&gt; 1.4 err: myerr</span>
<span class="token comment" spellcheck="true">// 47.932&gt; 1.4 results: [ &apos;Jack!!!&apos;, undefined ]</span>

<span class="token comment" spellcheck="true">/**
 * &#x5E76;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x540C;&#x65F6;&#x6700;&#x591A;2&#x4E2A;&#x51FD;&#x6570;&#x5E76;&#x884C;&#xFF0C;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#x3002;
 */</span>
<span class="token comment" spellcheck="true">//1.5</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">mapLimit</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 enter: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 handle: &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token operator">===</span><span class="token string">&apos;Jack&apos;</span><span class="token punctuation">)</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">&apos;!!!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//57.797&gt; 1.5 enter: Jack</span>
<span class="token comment" spellcheck="true">//57.800&gt; 1.5 enter: Mike</span>
<span class="token comment" spellcheck="true">//57.900&gt; 1.5 handle: Mike</span>
<span class="token comment" spellcheck="true">//57.900&gt; 1.5 enter: Freewind</span>
<span class="token comment" spellcheck="true">//58.008&gt; 1.5 handle: Jack</span>
<span class="token comment" spellcheck="true">//58.009&gt; 1.5 err: myerr</span>
<span class="token comment" spellcheck="true">//58.009&gt; 1.5 results: [ undefined, &apos;Mike!!!&apos; ]</span>
<span class="token comment" spellcheck="true">//58.208&gt; 1.5 handle: Freewind</span>
<span class="token comment" spellcheck="true">//58.208&gt; 1.5 enter: Test</span>
<span class="token comment" spellcheck="true">//58.273&gt; 1.5 handle: Test</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="nextTick"></a><br><br></p>
<h3 id="nextTick&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#nextTick&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="nextTick&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>nextTick</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * nextTick&#x7684;&#x4F5C;&#x7528;&#x4E0E;nodejs&#x7684;nextTick&#x4E00;&#x6837;&#xFF0C;&#x518D;&#x6700;&#x540E;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x3002;
 * &#x4F46;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#xFF0C;&#x53EA;&#x80FD;&#x4F7F;&#x7528;setTimeout(callback,0)&#xFF0C;&#x4F46;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x6709;&#x65F6;&#x5019;&#x4F1A;&#x8BA9;&#x5176;&#x5B83;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x4EFB;&#x52A1;&#x63D2;&#x5230;&#x524D;&#x9762;&#x53BB;&#x3002;
 * &#x6240;&#x4EE5;&#x63D0;&#x4F9B;&#x4E86;&#x8FD9;&#x4E2A;nextTick&#xFF0C;&#x8BA9;&#x540C;&#x6837;&#x7684;&#x4EE3;&#x7801;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x548C;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#x8868;&#x73B0;&#x4E00;&#x81F4;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// nextTick(callback)</span>

<span class="token keyword">var</span> calls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    calls<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&apos;two&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1&apos;</span><span class="token punctuation">,</span>calls<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
calls<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&apos;one&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2&apos;</span><span class="token punctuation">,</span>calls<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3&apos;</span><span class="token punctuation">,</span>calls<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//09.838&gt; 1.2[ &apos;one&apos; ]</span>
<span class="token comment" spellcheck="true">//09.842&gt; 1.1[ &apos;one&apos;, &apos;two&apos; ]</span>
<span class="token comment" spellcheck="true">//09.843&gt; 1.3[ &apos;one&apos;, &apos;two&apos; ]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="parallel"></a><br><br></p>
<h3 id="parallel&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#parallel&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="parallel&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>parallel</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x5E76;&#x884C;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x90FD;&#x662F;&#x7ACB;&#x5373;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x5176;&#x5B83;&#x51FD;&#x6570;&#x5148;&#x6267;&#x884C;&#x3002;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#x7684;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x6309;&#x7167;tasks&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x7684;&#x987A;&#x5E8F;&#x3002;
 *
 * &#x5982;&#x679C;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x7ACB;&#x523B;&#x5C06;err&#x548C;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x51FD;&#x6570;&#x7684;&#x7ED3;&#x679C;&#x503C;&#x4F20;&#x7ED9;parallel&#x6700;&#x7EC8;&#x7684;callback&#x3002;&#x5176;&#x5B83;&#x672A;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x51FD;&#x6570;&#x7684;&#x503C;&#x4E0D;&#x4F1A;&#x4F20;&#x5230;&#x6700;&#x7EC8;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x8981;&#x5360;&#x4E2A;&#x4F4D;&#x7F6E;&#x3002;
 * &#x540C;&#x65F6;&#x652F;&#x6301;json&#x5F62;&#x5F0F;&#x7684;tasks&#xFF0C;&#x5176;&#x6700;&#x7EC8;callback&#x7684;&#x7ED3;&#x679C;&#x4E5F;&#x4E3A;json&#x5F62;&#x5F0F;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// parallel(tasks, [callback])</span>

<span class="token comment" spellcheck="true">/**
 * &#x5E76;&#x884C;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x503C;&#x5C06;&#x6309;&#x51FD;&#x6570;&#x58F0;&#x660E;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x6C47;&#x6210;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;a400&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;a200&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;a300&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//36.929&gt; 1.1 err: null</span>
<span class="token comment" spellcheck="true">//36.930&gt; 1.1 results: [ &apos;a400&apos;, &apos;a200&apos;, &apos;a300&apos; ]</span>

<span class="token comment" spellcheck="true">/**
* &#x5982;&#x679C;&#x4E2D;&#x9014;&#x6709;&#x4E2A;&#x51FD;&#x6570;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x5C06;&#x8BE5;err&#x548C;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x7684;&#x51FD;&#x6570;&#x503C;&#x6C47;&#x6210;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;&#x7684;callback&#x3002;&#x8FD8;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x51FD;&#x6570;&#x7684;&#x503C;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#xFF0C;&#x4F46;&#x8981;&#x5728;&#x6700;&#x7EC8;&#x6570;&#x7EC4;&#x4E2D;&#x5360;&#x4E2A;&#x4F4D;&#x7F6E;
*/</span>
<span class="token comment" spellcheck="true">// 1.2</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2.1: &apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;a400&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// &#x8BE5;&#x51FD;&#x6570;&#x7684;&#x503C;&#x4E0D;&#x4F1A;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#xFF0C;&#x4F46;&#x8981;&#x5360;&#x4E2A;&#x4F4D;&#x7F6E;</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2.2: &apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">err</span><span class="token punctuation">(</span><span class="token string">&apos;e200&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2.3: &apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;a100&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//36.537&gt; 1.2.1: start</span>
<span class="token comment" spellcheck="true">//36.540&gt; 1.2.2: start</span>
<span class="token comment" spellcheck="true">//36.541&gt; 1.2.3: start</span>
<span class="token comment" spellcheck="true">//36.741&gt; 1.2 err: e200</span>
<span class="token comment" spellcheck="true">//36.744&gt; 1.2 results: [ , undefined, &apos;a100&apos; ]</span>

<span class="token comment" spellcheck="true">/**
* &#x4EE5;json&#x5F62;&#x5F0F;&#x4F20;&#x5165;tasks&#xFF0C;&#x6700;&#x7EC8;results&#x4E5F;&#x4E3A;json
*/</span>
<span class="token comment" spellcheck="true">// 1.3</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;a400&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;c300&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//36.943&gt; 1.3 err: null</span>
<span class="token comment" spellcheck="true">//36.944&gt; 1.3 results: { b: &apos;c300&apos;, a: &apos;a400&apos; }</span>

<span class="token comment" spellcheck="true">/**
* &#x5982;&#x679C;&#x4E2D;&#x9014;&#x51FA;&#x9519;&#xFF0C;&#x4F1A;&#x5C06;err&#x4E0E;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x7684;&#x51FD;&#x6570;&#x503C;&#xFF08;&#x6C47;&#x6210;&#x4E00;&#x4E2A;json&#xFF09;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#x3002;&#x672A;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x7684;&#x51FD;&#x6570;&#x503C;&#x88AB;&#x5FFD;&#x7565;&#xFF0C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x5728;&#x6700;&#x7EC8;json&#x4E2D;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// 1.4</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;a400&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// &#x8BE5;&#x51FD;&#x6570;&#x7684;&#x503C;&#x4E0D;&#x4F1A;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;&#x7684;callback</span>
    b<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">err</span><span class="token punctuation">(</span><span class="token string">&apos;e300&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    c<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;c200&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//36.853&gt; 1.4 err: e300</span>
<span class="token comment" spellcheck="true">//36.854&gt; 1.4 results: { c: &apos;c200&apos;, b: undefined }</span>

<span class="token comment" spellcheck="true">/**
 * &#x5E76;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x540C;&#x65F6;&#x6700;&#x591A;2&#x4E2A;&#x51FD;&#x6570;&#x5E76;&#x884C;&#xFF0C;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#x3002;
 */</span>
<span class="token comment" spellcheck="true">//1.5</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">parallelLimit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    a<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;a start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;a400&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;b start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;b200&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    c<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;c start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;c100&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    d<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;d start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;d600&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    e<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;e start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;e300&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//26.993&gt; a start</span>
<span class="token comment" spellcheck="true">//26.996&gt; b start</span>
<span class="token comment" spellcheck="true">//27.200&gt; c start</span>
<span class="token comment" spellcheck="true">//27.202&gt; d start</span>
<span class="token comment" spellcheck="true">//27.313&gt; e start</span>
<span class="token comment" spellcheck="true">//27.809&gt; 1.5 err:</span>
<span class="token comment" spellcheck="true">//27.810&gt; 1.5 results: { a: &apos;a400&apos;, b: &apos;b200&apos;, c: &apos;c100&apos;, e: &apos;e300&apos;, d: &apos;d600&apos; }</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="queue"></a><br><br></p>
<h3 id="queue&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#queue&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="queue&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>queue</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * queue&#x662F;&#x4E00;&#x4E2A;&#x4E32;&#x884C;&#x7684;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x901A;&#x8FC7;&#x9650;&#x5236;&#x4E86;worker&#x6570;&#x91CF;&#xFF0C;&#x4E0D;&#x518D;&#x4E00;&#x6B21;&#x6027;&#x5168;&#x90E8;&#x6267;&#x884C;&#x3002;
 * &#x5F53;worker&#x6570;&#x91CF;&#x4E0D;&#x591F;&#x7528;&#x65F6;&#xFF0C;&#x65B0;&#x52A0;&#x5165;&#x7684;&#x4EFB;&#x52A1;&#x5C06;&#x4F1A;&#x6392;&#x961F;&#x7B49;&#x5019;&#xFF0C;&#x76F4;&#x5230;&#x6709;&#x65B0;&#x7684;worker&#x53EF;&#x7528;&#x3002;
 *
 * &#x8BE5;&#x51FD;&#x6570;&#x6709;&#x591A;&#x4E2A;&#x70B9;&#x53EF;&#x4F9B;&#x56DE;&#x8C03;&#xFF0C;&#x5982;worker&#x7528;&#x5B8C;&#x65F6;&#x3001;&#x65E0;&#x7B49;&#x5019;&#x4EFB;&#x52A1;&#x65F6;&#x3001;&#x5168;&#x90E8;&#x6267;&#x884C;&#x5B8C;&#x65F6;&#x7B49;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// queue(worker, concurrency)</span>

<span class="token comment" spellcheck="true">/**
 * &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;queue&#xFF0C;&#x8BBE;worker&#x6570;&#x91CF;&#x4E3A;2
 */</span>
<span class="token keyword">var</span> q <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;worker is processing task: &apos;</span><span class="token punctuation">,</span> task<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    task<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x76D1;&#x542C;&#xFF1A;&#x5982;&#x679C;&#x67D0;&#x6B21;push&#x64CD;&#x4F5C;&#x540E;&#xFF0C;&#x4EFB;&#x52A1;&#x6570;&#x5C06;&#x8FBE;&#x5230;&#x6216;&#x8D85;&#x8FC7;worker&#x6570;&#x91CF;&#x65F6;&#xFF0C;&#x5C06;&#x8C03;&#x7528;&#x8BE5;&#x51FD;&#x6570;
 */</span>
q<span class="token punctuation">.</span>saturated <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;all workers to be used&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/**
 * &#x76D1;&#x542C;&#xFF1A;&#x5F53;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x4EA4;&#x7ED9;worker&#x65F6;&#xFF0C;&#x5C06;&#x8C03;&#x7528;&#x8BE5;&#x51FD;&#x6570;
 */</span>
q<span class="token punctuation">.</span>empty <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;no more tasks wating&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/**
 * &#x76D1;&#x542C;&#xFF1A;&#x5F53;&#x6240;&#x6709;&#x4EFB;&#x52A1;&#x90FD;&#x6267;&#x884C;&#x5B8C;&#x4EE5;&#x540E;&#xFF0C;&#x5C06;&#x8C03;&#x7528;&#x8BE5;&#x51FD;&#x6570;
 */</span>
q<span class="token punctuation">.</span>drain <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;all tasks have been processed&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/**
* &#x72EC;&#x7ACB;&#x52A0;&#x5165;2&#x4E2A;&#x4EFB;&#x52A1;
*/</span>
q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&apos;t1&apos;</span><span class="token punctuation">,</span> run<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;t1 is running, waiting tasks: &apos;</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;t1&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 400ms&#x540E;&#x6267;&#x884C;</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;t1 executed&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;pushed t1, waiting tasks: &apos;</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&apos;t2&apos;</span><span class="token punctuation">,</span>run<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;t2 is running, waiting tasks: &apos;</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;t2&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 200ms&#x540E;&#x6267;&#x884C;</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;t2 executed&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;pushed t2, waiting tasks: &apos;</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//54.448&gt; pushed t1, waiting tasks: 1</span>
<span class="token comment" spellcheck="true">//54.451&gt; all workers to be used</span>
<span class="token comment" spellcheck="true">//54.452&gt; pushed t2, waiting tasks: 2</span>
<span class="token comment" spellcheck="true">//54.452&gt; worker is processing task: t1</span>
<span class="token comment" spellcheck="true">//54.453&gt; t1 is running, waiting tasks: 1</span>
<span class="token comment" spellcheck="true">//54.455&gt; no more tasks wating</span>
<span class="token comment" spellcheck="true">//54.455&gt; worker is processing task: t2</span>
<span class="token comment" spellcheck="true">//54.455&gt; t2 is running, waiting tasks: 0</span>
<span class="token comment" spellcheck="true">//54.656&gt; t2 executed</span>
<span class="token comment" spellcheck="true">//54.867&gt; t1 executed</span>
<span class="token comment" spellcheck="true">//54.868&gt; all tasks have been processed</span>


<span class="token comment" spellcheck="true">// &#x540C;&#x65F6;&#x52A0;&#x5165;&#x591A;&#x4E2A;&#x4EFB;&#x52A1;</span>
q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span><span class="token string">&apos;t3&apos;</span><span class="token punctuation">,</span> run<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;t3 is running, waiting tasks: &apos;</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;t3&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 300ms&#x540E;&#x6267;&#x884C;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        name<span class="token punctuation">:</span><span class="token string">&apos;t4&apos;</span><span class="token punctuation">,</span> run<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;t4 is running, waiting tasks: &apos;</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;t4&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 500ms&#x540E;&#x6267;&#x884C;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        name<span class="token punctuation">:</span><span class="token string">&apos;t5&apos;</span><span class="token punctuation">,</span> run<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;t5 is running, waiting tasks: &apos;</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;t5&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 100ms&#x540E;&#x6267;&#x884C;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
        name<span class="token punctuation">:</span><span class="token string">&apos;t6&apos;</span><span class="token punctuation">,</span> run<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;t6 is running, waiting tasks: &apos;</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;t6&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 400ms&#x540E;&#x6267;&#x884C;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;err: &apos;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;pushed t3,t4,t5,t6 into queue, waiting tasks: &apos;</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//53.755&gt; all workers to be used</span>
<span class="token comment" spellcheck="true">//53.758&gt; pushed t3,t4,t5,t6 into queue, waiting tasks: 4</span>
<span class="token comment" spellcheck="true">//53.759&gt; worker is processing task: t3</span>
<span class="token comment" spellcheck="true">//53.760&gt; t3 is running, waiting tasks: 3</span>
<span class="token comment" spellcheck="true">//53.762&gt; worker is processing task: t4</span>
<span class="token comment" spellcheck="true">//53.762&gt; t4 is running, waiting tasks: 2</span>
<span class="token comment" spellcheck="true">//54.073&gt; err: null</span>
<span class="token comment" spellcheck="true">//54.074&gt; worker is processing task: t5</span>
<span class="token comment" spellcheck="true">//54.076&gt; t5 is running, waiting tasks: 1</span>
<span class="token comment" spellcheck="true">//54.183&gt; err: null</span>
<span class="token comment" spellcheck="true">//54.184&gt; no more tasks wating</span>
<span class="token comment" spellcheck="true">//54.185&gt; worker is processing task: t6</span>
<span class="token comment" spellcheck="true">//54.186&gt; t6 is running, waiting tasks: 0</span>
<span class="token comment" spellcheck="true">//54.265&gt; err: null</span>
<span class="token comment" spellcheck="true">//54.588&gt; err: null</span>
<span class="token comment" spellcheck="true">//54.589&gt; all tasks have been processed</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="reduce"></a><br><br></p>
<h3 id="Reduce&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#Reduce&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="Reduce&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>Reduce</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * Reduce&#x53EF;&#x4EE5;&#x8BA9;&#x6211;&#x4EEC;&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x521D;&#x59CB;&#x503C;&#xFF0C;&#x7528;&#x5B83;&#x4E0E;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x505A;&#x8FD0;&#x7B97;&#xFF0C;&#x6700;&#x540E;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x503C;&#x3002;reduce&#x4ECE;&#x5DE6;&#x5411;&#x53F3;&#x6765;&#x904D;&#x5386;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x4ECE;&#x53F3;&#x5411;&#x5DE6;&#xFF0C;&#x53EF;&#x4F7F;&#x7528;reduceRight&#x3002;
 */</span>
<span class="token comment" spellcheck="true">//reduce(arr, memo, iterator(memo,item,callback), callback(err,result))</span>
<span class="token comment" spellcheck="true">//alias: inject, foldl</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x987A;&#x5E8F;&#x6267;&#x884C;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>memo<span class="token punctuation">,</span> item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 enter: &apos;</span> <span class="token operator">+</span> memo <span class="token operator">+</span><span class="token string">&apos;, &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> memo<span class="token operator">+</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 28.789&gt; 1.1 enter: 100, 1</span>
<span class="token comment" spellcheck="true">// 28.889&gt; 1.1 enter: 101, 3</span>
<span class="token comment" spellcheck="true">// 28.999&gt; 1.1 enter: 104, 5</span>
<span class="token comment" spellcheck="true">// 29.109&gt; 1.1 err:</span>
<span class="token comment" spellcheck="true">// 29.109&gt; 1.1 result: 109</span>

<span class="token comment" spellcheck="true">/**
 * &#x987A;&#x5E8F;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x51FA;&#x9519;&#xFF0C;&#x53EA;&#x628A;&#x9519;&#x8BEF;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#xFF0C;&#x7ED3;&#x679C;&#x662F;null
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>memo<span class="token punctuation">,</span> item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 enter: &apos;</span> <span class="token operator">+</span> memo <span class="token operator">+</span><span class="token string">&apos;, &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token operator">===</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> memo<span class="token operator">+</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 05.541&gt; 1.2 enter: 100, 1</span>
<span class="token comment" spellcheck="true">// 05.649&gt; 1.2 enter: 101, 3</span>
<span class="token comment" spellcheck="true">// 05.760&gt; 1.2 err: myerr</span>
<span class="token comment" spellcheck="true">// 05.760&gt; 1.2 result:</span>

<span class="token comment" spellcheck="true">/**
 * &#x987A;&#x5E8F;&#x6267;&#x884C;&#x4ECE;&#x53F3;&#x5411;&#x5DE6;
 *
 * alias: foldr
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>memo<span class="token punctuation">,</span> item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 enter: &apos;</span> <span class="token operator">+</span> memo <span class="token operator">+</span><span class="token string">&apos;, &apos;</span> <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> memo<span class="token operator">+</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 28.789&gt; 1.3 enter: 100, 5</span>
<span class="token comment" spellcheck="true">// 28.889&gt; 1.3 enter: 105, 3</span>
<span class="token comment" spellcheck="true">// 28.999&gt; 1.3 enter: 108, 1</span>
<span class="token comment" spellcheck="true">// 29.109&gt; 1.3 err:</span>
<span class="token comment" spellcheck="true">// 29.109&gt; 1.3 result: 109</span>

<span class="token comment" spellcheck="true">/**
 *  &#x901A;&#x8FC7;t.inc&#x505A;&#x4E00;&#x4E2A;&#x7D2F;&#x52A0;&#x5668;&#xFF0C;&#x53C2;&#x4E0E;reduce&#x7684;&#x8BA1;&#x7B97;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>memo<span class="token punctuation">,</span>item<span class="token punctuation">,</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 enter: &apos;</span><span class="token operator">+</span>memo<span class="token operator">+</span><span class="token string">&apos;,&apos;</span><span class="token operator">+</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 handle: &apos;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> memo<span class="token operator">+</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 28.789&gt; 1.4 enter: 100,1</span>
<span class="token comment" spellcheck="true">// 28.999&gt; 1.4 handle: 2</span>
<span class="token comment" spellcheck="true">// 28.999&gt; 1.4 enter: 102,3</span>
<span class="token comment" spellcheck="true">// 29.209&gt; 1.4 handle: 4</span>
<span class="token comment" spellcheck="true">// 29.209&gt; 1.4 enter: 106,5</span>
<span class="token comment" spellcheck="true">// 29.409&gt; 1.4 handle: 6</span>
<span class="token comment" spellcheck="true">// 29.409&gt; 1.4 err:</span>
<span class="token comment" spellcheck="true">// 29.409&gt; 1.4 result: 112</span>
<span class="token comment" spellcheck="true">// --&gt; spent 0.62s</span>

<span class="token comment" spellcheck="true">/**
 *  &#x901A;&#x8FC7;t.inc&#x505A;&#x4E00;&#x4E2A;&#x7D2F;&#x52A0;&#x5668;&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;&#x5BF9;map&#x7684;&#x7ED3;&#x679C;&#x96C6;&#x505A;reduce
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 enter: &apos;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 handle: &apos;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> sum <span class="token operator">=</span> results<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>memo<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memo <span class="token operator">+</span> item<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 sum: &apos;</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 28.789&gt; 1.5 enter: 1</span>
<span class="token comment" spellcheck="true">// 28.789&gt; 1.5 enter: 3</span>
<span class="token comment" spellcheck="true">// 28.789&gt; 1.5 enter: 5</span>
<span class="token comment" spellcheck="true">// 28.999&gt; 1.5 handle: 2</span>
<span class="token comment" spellcheck="true">// 28.999&gt; 1.5 handle: 4</span>
<span class="token comment" spellcheck="true">// 28.999&gt; 1.5 handle: 6</span>
<span class="token comment" spellcheck="true">// 28.999&gt; 1.5 err:</span>
<span class="token comment" spellcheck="true">// 28.999&gt; 1.5 results: [ 2, 4, 6 ]</span>
<span class="token comment" spellcheck="true">// 28.999&gt; 1.5 sum: 112</span>
<span class="token comment" spellcheck="true">// --&gt; spent 0.21</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="series"></a><br><br></p>
<h3 id="series&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#series&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="series&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>series</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x4E32;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x6267;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x3002;
 *
 * &#x5982;&#x679C;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5411;&#x5B83;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E2D;&#x4F20;&#x4E86;&#x4E00;&#x4E2A;error&#xFF0C;&#x5219;&#x540E;&#x9762;&#x7684;&#x51FD;&#x6570;&#x90FD;&#x4E0D;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x5E76;&#x4E14;&#x4F1A;&#x7ACB;&#x523B;&#x5C06;&#x8BE5;error&#x4EE5;&#x53CA;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x4E86;&#x7684;&#x51FD;&#x6570;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4F20;&#x7ED9;series&#x4E2D;&#x6700;&#x540E;&#x90A3;&#x4E2A;callback&#x3002;
 * &#x5F53;&#x6240;&#x6709;&#x7684;&#x51FD;&#x6570;&#x6267;&#x884C;&#x5B8C;&#x540E;&#xFF08;&#x6CA1;&#x6709;&#x51FA;&#x9519;&#xFF09;&#xFF0C;&#x5219;&#x4F1A;&#x628A;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x4F20;&#x7ED9;&#x5176;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x7ED3;&#x679C;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x4F20;&#x7ED9;series&#x6700;&#x540E;&#x7684;&#x90A3;&#x4E2A;callback&#x3002;
 * &#x8FD8;&#x53EF;&#x4EE5;json&#x7684;&#x5F62;&#x5F0F;&#x6765;&#x63D0;&#x4F9B;tasks&#x3002;&#x6BCF;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x90FD;&#x4F1A;&#x88AB;&#x5F53;&#x4F5C;&#x51FD;&#x6570;&#x6765;&#x6267;&#x884C;&#xFF0C;&#x5E76;&#x4E14;&#x7ED3;&#x679C;&#x4E5F;&#x4F1A;&#x4EE5;json&#x5F62;&#x5F0F;&#x4F20;&#x7ED9;series&#x6700;&#x540E;&#x7684;&#x90A3;&#x4E2A;callback&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x8BFB;&#x6027;&#x66F4;&#x9AD8;&#x4E00;&#x4E9B;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// series(tasks, [callback])</span>

<span class="token comment" spellcheck="true">/**
 * &#x5168;&#x90E8;&#x51FD;&#x6570;&#x90FD;&#x6B63;&#x5E38;&#x6267;&#x884C;&#x3002;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x4EA7;&#x751F;&#x7684;&#x503C;&#x5C06;&#x6309;&#x987A;&#x5E8F;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;&#x7684;callback&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//05.155&gt; 1.1 err: null</span>
<span class="token comment" spellcheck="true">//05.156&gt; 1.1 results: [ 4, 9, 3 ]</span>

<span class="token comment" spellcheck="true">/**
 * &#x4E2D;&#x95F4;&#x6709;&#x51FD;&#x6570;&#x51FA;&#x9519;&#x3002;&#x51FA;&#x9519;&#x4E4B;&#x540E;&#x7684;&#x51FD;&#x6570;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#xFF0C;&#x9519;&#x8BEF;&#x53CA;&#x4E4B;&#x524D;&#x6B63;&#x5E38;&#x6267;&#x884C;&#x7684;&#x51FD;&#x6570;&#x7ED3;&#x679C;&#x5C06;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;&#x7684;callback&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.2</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">err</span><span class="token punctuation">(</span><span class="token string">&apos;test_err&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//04.964&gt; 1.2 err: test_err</span>
<span class="token comment" spellcheck="true">//04.973&gt; 1.2 results: [ 4, undefined ]</span>

<span class="token comment" spellcheck="true">/**
 * &#x5982;&#x679C;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#x4F20;&#x7684;&#x6570;&#x636E;&#x662F;undefined, null, {}, []&#x7B49;&#xFF0C;&#x5B83;&#x4EEC;&#x4F1A;&#x539F;&#x6837;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.3</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span>undefined<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token string">&apos;abc&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//05.794&gt; 1.3 err: null</span>
<span class="token comment" spellcheck="true">//05.795&gt; 1.3 results: [ 3, undefined, null, {}, [], &apos;abc&apos; ]</span>

<span class="token comment" spellcheck="true">/**
 * &#x4EE5;json&#x5F62;&#x5F0F;&#x4F20;&#x5165;tasks&#x3002;&#x5176;&#x7ED3;&#x679C;&#x4E5F;&#x5C06;&#x4EE5;json&#x5F62;&#x5F0F;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#x3002;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span>undefined<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    c<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">err</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    d<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//05.178&gt; 1.4 err: myerr</span>
<span class="token comment" spellcheck="true">//05.179&gt; 1.4 results: { a: 4, b: undefined, c: undefined }</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="some"></a><br><br></p>
<h3 id="some&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#some&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="some&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>some</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x5F53;&#x96C6;&#x5408;&#x4E2D;&#x662F;&#x5426;&#x6709;&#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x6700;&#x7EC8;callback&#x5F97;&#x5230;&#x7684;&#x503C;&#x4E3A;true&#xFF0C;&#x5426;&#x5219;&#x4E3A;false.
 */</span>
<span class="token comment" spellcheck="true">// some(arr, iterator(item,callback(test)), callback(result))</span>
<span class="token comment" spellcheck="true">//alias: any</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x4E32;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x96C6;&#x5408;&#x4E2D;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&lt;=3&#xFF0C;&#x6240;&#x4EE5;&#x7ED3;&#x679C;&#x4E3A;true
 */</span>
<span class="token comment" spellcheck="true">// 1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 enter: &apos;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 handle: &apos;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>item<span class="token operator">&lt;=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 36.165&gt; 1.1 enter: 1</span>
<span class="token comment" spellcheck="true">// 36.165&gt; 1.1 enter: 2</span>
<span class="token comment" spellcheck="true">// 36.165&gt; 1.1 enter: 3</span>
<span class="token comment" spellcheck="true">// 36.165&gt; 1.1 enter: 6</span>
<span class="token comment" spellcheck="true">// 36.275&gt; 1.1 handle: 1</span>
<span class="token comment" spellcheck="true">// 36.275&gt; 1.1 result: true</span>
<span class="token comment" spellcheck="true">// 36.275&gt; 1.1 handle: 2</span>
<span class="token comment" spellcheck="true">// 36.275&gt; 1.1 handle: 3</span>
<span class="token comment" spellcheck="true">// 36.275&gt; 1.1 handle: 6</span>


<span class="token comment" spellcheck="true">/**
 * &#x4E32;&#x884C;&#x6267;&#x884C;&#xFF0C;&#x96C6;&#x5408;&#x4E2D;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&gt;10&#xFF0C;&#x6240;&#x4EE5;&#x7ED3;&#x679C;&#x4E3A;false
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 enter: &apos;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 handle: &apos;</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>item<span class="token operator">&gt;</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 36.165&gt; 1.2 enter: 1</span>
<span class="token comment" spellcheck="true">// 36.165&gt; 1.2 enter: 2</span>
<span class="token comment" spellcheck="true">// 36.165&gt; 1.2 enter: 3</span>
<span class="token comment" spellcheck="true">// 36.165&gt; 1.2 enter: 6</span>
<span class="token comment" spellcheck="true">// 36.275&gt; 1.2 handle: 1</span>
<span class="token comment" spellcheck="true">// 36.275&gt; 1.2 handle: 2</span>
<span class="token comment" spellcheck="true">// 36.275&gt; 1.2 handle: 3</span>
<span class="token comment" spellcheck="true">// 36.275&gt; 1.2 handle: 6</span>
<span class="token comment" spellcheck="true">// 36.275&gt; 1.2 result: false</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="sortBy"></a><br><br></p>
<h3 id="sortBy&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#sortBy&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="sortBy&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>sortBy</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x5BF9;&#x96C6;&#x5408;&#x5185;&#x7684;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x4F9D;&#x636E;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x67D0;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x540E;&#x4EA7;&#x751F;&#x7684;&#x503C;&#xFF0C;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x6392;&#x5E8F;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// sortBy(array, iterator(item,callback(err,result)), callback(err,results))</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x901A;&#x8FC7;&#x5F02;&#x6B65;&#x8FED;&#x4EE3;&#x5668;&#xFF0C;&#x5BF9;&#x96C6;&#x5408;&#x8FDB;&#x884C;&#x6392;&#x5E8F;
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">sortBy</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 26.562&gt; 1.1 err: null</span>
<span class="token comment" spellcheck="true">// 26.562&gt; 1.1 results: [ 1, 3, 6 ]</span>

<span class="token comment" spellcheck="true">/**
 * &#x8FED;&#x4EE3;&#x51FA;&#x9519;&#xFF0C;callback&#x8FD4;&#x56DE;err&#xFF0C;&#x6CA1;&#x6709;results
 */</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">sortBy</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token operator">===</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 results: &apos;</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 26.572&gt; 1.2 err: myerr</span>
<span class="token comment" spellcheck="true">// 26.572&gt; 1.2 results:</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="t.js"></a><br><br></p>
<h3 id="t-js&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#t-js&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="t.js&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>t.js</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token comment" spellcheck="true">// &#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x540D;&#x7684;&apos;t&apos;&#x6211;&#x4E0D;&#x662F;&#x5F88;&#x660E;&#x767D;&#x539F;&#x4F5C;&#x8005;freewind&#x7684;&#x610F;&#x601D;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x53EB;&#x505A;&apos;lib.js&apos;&#x6216;&#x8005;</span>
<span class="token comment" spellcheck="true">// &apos;helper.js&apos;&#x6BD4;&#x8F83;&#x5408;&#x9002;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x9762;&#x90FD;&#x662F;&#x4E9B;&#x8F85;&#x52A9;&#x51FD;&#x6570;&#x3002;</span>

<span class="token keyword">var</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;moment&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>inc <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//&#x5C06;&#x53C2;&#x6570;n&#x81EA;&#x589E;1&#x4E4B;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x7ED9;async</span>
    timeout <span class="token operator">=</span> timeout <span class="token operator">||</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>fire <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//&#x76F4;&#x63A5;&#x5C06;obj&#x7684;&#x5185;&#x5BB9;&#x8FD4;&#x56DE;&#x7ED9;async</span>
    timeout <span class="token operator">=</span> timeout <span class="token operator">||</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>err <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>errMsg<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//&#x6A21;&#x62DF;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x7684;&#x4EA7;&#x751F;&#xFF0C;&#x8BA9;async&#x5404;&#x4E2A;&#x51FD;&#x6570;&#x672B;&#x5C3E;&#x7684;callback&#x63A5;&#x6536;&#x5230;&#x3002;</span>
    timeout <span class="token operator">=</span> timeout <span class="token operator">||</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>errMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// utils</span>
exports<span class="token punctuation">.</span>log <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//&#x5BF9;console.log&#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#x3002;&#x4E3B;&#x8981;&#x662F;&#x589E;&#x52A0;&#x4E86;&#x79D2;&#x949F;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x901A;&#x8FC7;&#x79D2;&#x6570;&#x7684;&#x5DEE;&#x503C;&#x65B9;&#x4FBF;&#x5927;&#x5BB6;&#x5BF9;async&#x7684;&#x7406;&#x89E3;&#x3002;</span>
    process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&apos;ss.SSS&apos;</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&apos;&gt; &apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token operator">!==</span>undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>wait <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>mils<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//&#x523B;&#x610F;&#x7B49;&#x5F85;mils&#x7684;&#x65F6;&#x95F4;&#xFF0C;mils&#x7684;&#x5355;&#x4F4D;&#x662F;&#x6BEB;&#x79D2;&#x3002;</span>
    <span class="token keyword">var</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span> <span class="token operator">-</span> now <span class="token operator">&lt;=</span> mils<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="times"></a><br><br></p>
<h3 id="times-timesSeries&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#times-timesSeries&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="times timesSeries&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>times</code> <code>timesSeries</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
* &#x5F02;&#x6B65;&#x8FD0;&#x884C;,times&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8C03;&#x7528;&#x51E0;&#x6B21;&#xFF0C;&#x5E76;&#x628A;&#x7ED3;&#x679C;&#x5408;&#x5E76;&#x5230;&#x6570;&#x7EC4;&#x4E2D;&#x8FD4;&#x56DE;
*/</span>
<span class="token comment" spellcheck="true">// times(n, callback)</span>

<span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">7</span> <span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> createUser <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token string">&apos;user&apos;</span> <span class="token operator">+</span> id<span class="token punctuation">,</span>
        delay<span class="token punctuation">:</span><span class="token function">delay</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/**
 * &#x5F02;&#x6B65;&#x6267;&#x884C;&#xFF0C;&#x8C03;&#x7528;3&#x6B21;createUser&#x51FD;&#x6570;&#xFF0C;&#x7ED3;&#x679C;&#x88AB;&#x5408;&#x5E76;&#x5230;&#x6570;&#x7EC4;&#x8FD4;&#x56DE;
 */</span>
<span class="token comment" spellcheck="true">//1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.1 enter: &quot;</span><span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 handler: &apos;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">createUser</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token function">delay</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 result: &apos;</span><span class="token punctuation">,</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//07.397&gt; 1.1 enter: 0</span>
<span class="token comment" spellcheck="true">//07.400&gt; 1.1 enter: 1</span>
<span class="token comment" spellcheck="true">//07.401&gt; 1.1 enter: 2</span>
<span class="token comment" spellcheck="true">//07.412&gt; 1.1 handler: 2</span>
<span class="token comment" spellcheck="true">//07.912&gt; 1.1 handler: 0</span>
<span class="token comment" spellcheck="true">//08.009&gt; 1.1 handler: 1</span>
<span class="token comment" spellcheck="true">//08.010&gt; 1.1 err: null</span>
<span class="token comment" spellcheck="true">//08.011&gt; 1.1 result: [ { id: &apos;user0&apos;, delay: 500 },</span>
<span class="token comment" spellcheck="true">//    { id: &apos;user1&apos;, delay: 600 },</span>
<span class="token comment" spellcheck="true">//    { id: &apos;user2&apos;, delay: 0 } ]</span>

<span class="token comment" spellcheck="true">/**
*  timesSeries&#x4E0E;time&#x552F;&#x4E00;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x540C;&#x6B65;&#x6267;&#x884C;
*/</span>
<span class="token comment" spellcheck="true">//timesSeries(n, callback)</span>

<span class="token comment" spellcheck="true">/**
 * &#x540C;&#x6B65;&#x6267;&#x884C;&#xFF0C;&#x8C03;&#x7528;3&#x6B21;createUser&#x51FD;&#x6570;&#xFF0C;&#x7ED3;&#x679C;&#x88AB;&#x5408;&#x5E76;&#x5230;&#x6570;&#x7EC4;&#x8FD4;&#x56DE;
 */</span>
<span class="token comment" spellcheck="true">//1.2</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">timesSeries</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.2 enter: &quot;</span><span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 handler: &apos;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">createUser</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> user<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token function">delay</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 result: &apos;</span><span class="token punctuation">,</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//16.642&gt; 1.2 enter: 0</span>
<span class="token comment" spellcheck="true">//17.159&gt; 1.2 handler: 0</span>
<span class="token comment" spellcheck="true">//17.162&gt; 1.2 enter: 1</span>
<span class="token comment" spellcheck="true">//17.763&gt; 1.2 handler: 1</span>
<span class="token comment" spellcheck="true">//17.767&gt; 1.2 enter: 2</span>
<span class="token comment" spellcheck="true">//17.778&gt; 1.2 handler: 2</span>
<span class="token comment" spellcheck="true">//17.779&gt; 1.2 err: null</span>
<span class="token comment" spellcheck="true">//17.780&gt; 1.2 result: [ { id: &apos;user0&apos;, delay: 500 },</span>
<span class="token comment" spellcheck="true">//    { id: &apos;user1&apos;, delay: 600 },</span>
<span class="token comment" spellcheck="true">//    { id: &apos;user2&apos;, delay: 0 } ]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="util.js"></a><br><br></p>
<h3 id="unmemoize-noConflict-memoize-log-dir-&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#unmemoize-noConflict-memoize-log-dir-&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="unmemoize noConflict memoize log dir &#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>unmemoize</code> <code>noConflict</code> <code>memoize</code> <code>log</code> <code>dir</code> &#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
* &#x8BA9;&#x67D0;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7F13;&#x5B58;&#x5B83;&#x7684;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x3002;&#x5BF9;&#x4E8E;&#x76F8;&#x540C;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x53EA;&#x8BA1;&#x7B97;&#x4E00;&#x6B21;&#xFF0C;&#x4E0B;&#x6B21;&#x5C31;&#x76F4;&#x63A5;&#x62FF;&#x5230;&#x4E4B;&#x524D;&#x7B97;&#x597D;&#x7684;&#x7ED3;&#x679C;&#x3002;
* hasher&#x53EF;&#x4EE5;&#x8BA9;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x5982;&#x4F55;&#x6839;&#x636E;&#x53C2;&#x6570;&#x6765;&#x5224;&#x65AD;&#x5B83;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#x4E86;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// memoize(fn, [hasher])</span>
<span class="token comment" spellcheck="true">//1.1</span>
<span class="token keyword">var</span> slow_fn <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 start working for: &apos;</span> <span class="token operator">+</span> x<span class="token operator">+</span><span class="token string">&apos;,&apos;</span><span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 finished: &apos;</span> <span class="token operator">+</span> x<span class="token operator">+</span><span class="token string">&apos;,&apos;</span><span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> x<span class="token operator">+</span><span class="token string">&apos;,&apos;</span><span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">memoize</span><span class="token punctuation">(</span>slow_fn<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">&apos;a&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;b&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.1 first time: &quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">&apos;cc&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;d&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.1 first time: &quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">&apos;a&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;b&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.1 second time: &quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//15.416&gt; 1.1 start working for: a,b</span>
<span class="token comment" spellcheck="true">//15.920&gt; 1.1 finished: a,b</span>
<span class="token comment" spellcheck="true">//15.920&gt; 1.1 first time: a,b</span>
<span class="token comment" spellcheck="true">//15.921&gt; 1.1 start working for: cc,d</span>
<span class="token comment" spellcheck="true">//16.423&gt; 1.1 finished: cc,d</span>
<span class="token comment" spellcheck="true">//16.423&gt; 1.1 first time: cc,d</span>
<span class="token comment" spellcheck="true">//16.424&gt; 1.1 second time: a,b</span>


<span class="token comment" spellcheck="true">/**
* &#x8BA9;&#x5DF2;&#x7ECF;&#x88AB;&#x7F13;&#x5B58;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x4E0D;&#x7F13;&#x5B58;&#x7684;&#x51FD;&#x6570;&#x5F15;&#x7528;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// unmemoize(fn)</span>
<span class="token comment" spellcheck="true">//1.2</span>
<span class="token keyword">var</span> slow_fn2 <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 start working for: &apos;</span> <span class="token operator">+</span> x<span class="token operator">+</span><span class="token string">&apos;,&apos;</span><span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    t<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 finished: &apos;</span> <span class="token operator">+</span> x<span class="token operator">+</span><span class="token string">&apos;,&apos;</span><span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> x<span class="token operator">+</span><span class="token string">&apos;,&apos;</span><span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> fn2 <span class="token operator">=</span> <span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">memoize</span><span class="token punctuation">(</span>slow_fn2<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fn2</span><span class="token punctuation">(</span><span class="token string">&apos;a&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;b&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.2 first time: &quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> unFn2 <span class="token operator">=</span><span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">unmemoize</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 unmemoized&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">unFn2</span><span class="token punctuation">(</span><span class="token string">&apos;a&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;b&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.2 second time: &quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//16.424&gt; 1.2 start working for: a,b</span>
<span class="token comment" spellcheck="true">//16.926&gt; 1.2 finished: a,b</span>
<span class="token comment" spellcheck="true">//16.926&gt; 1.2 first time: a,b</span>
<span class="token comment" spellcheck="true">//16.927&gt; 1.2 unmemoized</span>
<span class="token comment" spellcheck="true">//16.927&gt; 1.2 start working for: a,b</span>
<span class="token comment" spellcheck="true">//17.428&gt; 1.2 finished: a,b</span>
<span class="token comment" spellcheck="true">//17.428&gt; 1.2 second time: a,b</span>

<span class="token comment" spellcheck="true">/**
* &#x6267;&#x884C;&#x67D0;&#x5F02;&#x6B65;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x8BB0;&#x5F55;&#x5B83;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x3002;&#x8BD5;&#x9A8C;&#x51FD;&#x6570;&#x65F6;&#x5F88;&#x65B9;&#x4FBF;&#xFF0C;&#x4E0D;&#x7528;&#x5199;&#x90A3;&#x4E9B;&#x56FA;&#x5B9A;&#x6A21;&#x5F0F;&#x7684;&#x4EE3;&#x7801;&#x3002;
* &#x5982;&#x679C;&#x8BE5;&#x51FD;&#x6570;&#x5411;&#x56DE;&#x8C03;&#x4E2D;&#x4F20;&#x5165;&#x4E86;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5219;&#x6BCF;&#x884C;&#x8BB0;&#x5F55;&#x4E00;&#x4E2A;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// log(function, arguments)</span>
<span class="token comment" spellcheck="true">//1.3</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&apos;bsspirit&apos;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> hello <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>
            <span class="token string">&apos;first &apos;</span> <span class="token operator">+</span> name<span class="token punctuation">,</span>
            <span class="token string">&apos;second &apos;</span><span class="token operator">+</span> name<span class="token punctuation">,</span>
            x<span class="token punctuation">,</span>
            <span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token string">&apos;123&apos;</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.3 handler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hello<span class="token punctuation">,</span> <span class="token string">&apos;time&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//37.620&gt; 1.3 handler</span>
<span class="token comment" spellcheck="true">//first time</span>
<span class="token comment" spellcheck="true">//second time</span>
<span class="token comment" spellcheck="true">//[Function]</span>
<span class="token comment" spellcheck="true">//{ a: &apos;123&apos; }</span>

<span class="token comment" spellcheck="true">/**
* dir&#x4E0E;log&#x90FD;&#x662F;&#x6253;&#x5370;&#x51FA;&#x8F93;&#xFF0C;&#x5728;nodejs&#x73AF;&#x5883;&#x4E2D;&#x6CA1;&#x6709;&#x5206;&#x522B;&#x3002;
* dir&#x7684;&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x5728;&#x4E8E;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x7684;console.dir()&#x51FD;&#x6570;&#xFF0C;&#x663E;&#x793A;&#x4E3A;DOM&#x89C6;&#x56FE;&#x3002;
*
* http://stackoverflow.com/questions/10636866/whats-the-difference-between-async-log-and-async-dir
*/</span>
<span class="token comment" spellcheck="true">//1.4</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.4 handler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>hello<span class="token punctuation">,</span> <span class="token string">&apos;world&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//37.620&gt; 1.4 handler</span>
<span class="token comment" spellcheck="true">//first time</span>
<span class="token comment" spellcheck="true">//second time</span>
<span class="token comment" spellcheck="true">//[Function]</span>
<span class="token comment" spellcheck="true">//{ a: &apos;123&apos; }</span>

<span class="token comment" spellcheck="true">/**
* noConflict()&#x4EC5;&#x4EC5;&#x7528;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#xFF0C;&#x5728;nodejs&#x4E2D;&#x6CA1;&#x7528;&#xFF0C;&#x8FD9;&#x91CC;&#x65E0;&#x6CD5;&#x6F14;&#x793A;&#x3002;
*
* &#x5B83;&#x7684;&#x4F5C;&#x7528;&#x662F;&#xFF1A;&#x5982;&#x679C;&#x4E4B;&#x524D;&#x5DF2;&#x7ECF;&#x5728;&#x5168;&#x5C40;&#x57DF;&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;async&#x53D8;&#x91CF;&#xFF0C;&#x5F53;&#x5BFC;&#x5165;&#x672C;async.js&#x65F6;&#xFF0C;&#x4F1A;&#x5148;&#x628A;&#x4E4B;&#x524D;&#x7684;async&#x53D8;&#x91CF;&#x4FDD;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x7136;&#x540E;&#x8986;&#x76D6;&#x5B83;&#x3002;
 * &#x7528;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x8C03;&#x7528;noConflict()&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x4F1A;&#x5F52;&#x8FD8;&#x8BE5;&#x503C;&#x3002;&#x540C;&#x65F6;&#x8FD4;&#x56DE;async&#x672C;&#x8EAB;&#x4F9B;&#x6362;&#x540D;&#x4F7F;&#x7528;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// noConflict()</span>
<span class="token comment" spellcheck="true">/*
    // global on the server, window in the browser
    var root = this,
        previous_async = root.async;

    if (typeof module !== &apos;undefined&apos; &amp;&amp; module.exports) {
        module.exports = async;
    }
    else {
        root.async = async;
    }

    async.noConflict = function () {
        root.async = previous_async;
        return async;
    };
*/</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="waterfall"></a><br><br></p>
<h3 id="waterfall&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#waterfall&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="waterfall&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>waterfall</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x6309;&#x987A;&#x5E8F;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#x4E00;&#x7EC4;&#x51FD;&#x6570;&#x3002;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x4EA7;&#x751F;&#x7684;&#x503C;&#xFF0C;&#x90FD;&#x5C06;&#x4F20;&#x7ED9;&#x4E0B;&#x4E00;&#x4E2A;&#x3002;
 * &#x5982;&#x679C;&#x4E2D;&#x9014;&#x51FA;&#x9519;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x51FD;&#x6570;&#x5C06;&#x4E0D;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#x3002;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x5C06;&#x4F20;&#x7ED9;waterfall&#x6700;&#x7EC8;&#x7684;callback&#x3002;&#x4E4B;&#x524D;&#x4EA7;&#x751F;&#x7684;&#x7ED3;&#x679C;&#x88AB;&#x4E22;&#x5F03;&#x3002;
 *
 * &#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x540D;&#x4E3A;waterfall(&#x7011;&#x5E03;)&#xFF0C;&#x53EF;&#x4EE5;&#x60F3;&#x50CF;&#x7011;&#x5E03;&#x4ECE;&#x4E0A;&#x5230;&#x4E0B;&#xFF0C;&#x4E2D;&#x9014;&#x51B2;&#x8FC7;&#x4E00;&#x5C42;&#x5C42;&#x7A81;&#x8D77;&#x7684;&#x77F3;&#x5934;&#x3002;
 *
 * &#x6CE8;&#x610F;&#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x4E0D;&#x652F;&#x6301;json&#x683C;&#x5F0F;&#x7684;tasks
 */</span>
<span class="token comment" spellcheck="true">// async.waterfall(tasks, [callback]);</span>

<span class="token comment" spellcheck="true">/**
 * &#x6240;&#x6709;&#x51FD;&#x6570;&#x6B63;&#x5E38;&#x6267;&#x884C;&#xFF0C;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x7ED3;&#x679C;&#x90FD;&#x5C06;&#x53D8;&#x4E3A;&#x4E0B;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x3002;
 *
 * &#x6CE8;&#x610F;&#xFF0C;&#x6240;&#x6709;&#x7684;callback&#x90FD;&#x5FC5;&#x987B;&#x5F62;&#x5982;callback(err, result)&#xFF0C;&#x4F46;err&#x53C2;&#x6570;&#x5728;&#x524D;&#x9762;&#x5404;&#x51FD;&#x6570;&#x4E2D;&#x65E0;&#x9700;&#x58F0;&#x660E;&#xFF0C;&#x5B83;&#x88AB;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// 1.1</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1.1: &apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1.2: &apos;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1.3: &apos;</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span>n<span class="token operator">*</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//31.749&gt; 1.1.1: start</span>
<span class="token comment" spellcheck="true">//31.752&gt; 1.1.2: 3</span>
<span class="token comment" spellcheck="true">//31.953&gt; 1.1.3: 4</span>
<span class="token comment" spellcheck="true">//32.156&gt; 1.1 err: null</span>
<span class="token comment" spellcheck="true">//32.159&gt; 1.1 result: 16</span>

<span class="token comment" spellcheck="true">/**
* &#x4E2D;&#x9014;&#x6709;&#x51FD;&#x6570;&#x51FA;&#x9519;&#xFF0C;&#x5176;err&#x76F4;&#x63A5;&#x4F20;&#x7ED9;&#x6700;&#x7EC8;callback&#xFF0C;&#x7ED3;&#x679C;&#x88AB;&#x4E22;&#x5F03;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x51FD;&#x6570;&#x4E0D;&#x518D;&#x6267;&#x884C;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// 1.2</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2.1: &apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2.2: &apos;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2.3: &apos;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">err</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2.4: &apos;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//44.935&gt; 1.2.1: start</span>
<span class="token comment" spellcheck="true">//44.939&gt; 1.2.2: 3</span>
<span class="token comment" spellcheck="true">//45.140&gt; 1.2.3: 4</span>
<span class="token comment" spellcheck="true">//45.344&gt; 1.2 err: myerr</span>
<span class="token comment" spellcheck="true">//45.348&gt; 1.2 result:</span>

<span class="token comment" spellcheck="true">/**
* &#x6CE8;&#x610F;&#xFF1A; &#x4EE5;json&#x5F62;&#x5F0F;&#x4F20;&#x5165;tasks&#xFF0C;&#x5C06;&#x4E0D;&#x4F1A;&#x88AB;&#x6267;&#x884C;!!
*/</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">waterfall</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3.1: &apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;start&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3.2: &apos;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    c<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3.3: &apos;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> t<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span>n<span class="token operator">*</span>n<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//49.222&gt; 1.3 err: [Error: First argument to waterfall must be an array of functions]</span>
<span class="token comment" spellcheck="true">//49.228&gt; 1.3 result:</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a name="whilst"></a><br><br></p>
<h3 id="whilst-until-doUntil-forever&#x548C;-doWhilst&#x4EE3;&#x7801;&#x6F14;&#x793A;"><a href="#whilst-until-doUntil-forever&#x548C;-doWhilst&#x4EE3;&#x7801;&#x6F14;&#x793A;" class="headerlink" title="whilst until doUntil forever&#x548C; doWhilst&#x4EE3;&#x7801;&#x6F14;&#x793A;"></a><code>whilst</code> <code>until</code> <code>doUntil</code> <code>forever</code>&#x548C; <code>doWhilst</code>&#x4EE3;&#x7801;&#x6F14;&#x793A;</h3><pre class="line-numbers language-javascript g-mb-30"><code class="language-javascript"><span class="token keyword">var</span> <span class="token keyword">async</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;async&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./t&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> log <span class="token operator">=</span> t<span class="token punctuation">.</span>log<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * &#x76F8;&#x5F53;&#x4E8E;while&#xFF0C;&#x4F46;&#x5176;&#x4E2D;&#x7684;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#x5C06;&#x5728;&#x5B8C;&#x6210;&#x540E;&#x624D;&#x4F1A;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#x3002;
 *
 * &#x5B83;&#x76F8;&#x5F53;&#x4E8E;&#xFF1A;
 * try {
 *   whilst(test) {
 *     fn();
 *   }
 *   callback();
 * } catch (err) {
 *   callback(err);
 * }
 *
 * &#x8BE5;&#x51FD;&#x6570;&#x7684;&#x529F;&#x80FD;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x6761;&#x4EF6;&#x53D8;&#x91CF;&#x901A;&#x5E38;&#x5B9A;&#x4E49;&#x5728;&#x5916;&#x9762;&#xFF0C;&#x53EF;&#x4F9B;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x8BBF;&#x95EE;&#x3002;&#x5728;&#x5FAA;&#x73AF;&#x4E2D;&#xFF0C;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#x65F6;&#x4EA7;&#x751F;&#x7684;&#x503C;&#x5B9E;&#x9645;&#x4E0A;&#x88AB;&#x4E22;&#x5F03;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x6700;&#x540E;&#x90A3;&#x4E2A;callback&#x53EA;&#x80FD;&#x4F20;&#x5165;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3002;
 *
 * &#x53E6;&#x5916;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x51FD;&#x6570;fn&#x9700;&#x8981;&#x80FD;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x51FD;&#x6570;cb&#xFF0C;&#x8FD9;&#x4E2A;cb&#x6700;&#x7EC8;&#x5FC5;&#x987B;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x51FA;&#x9519;&#x6216;&#x6B63;&#x5E38;&#x7ED3;&#x675F;&#x3002;
 */</span>
<span class="token comment" spellcheck="true">// whilst(test, fn, callback)</span>

<span class="token comment" spellcheck="true">/**
* &#x6B63;&#x5E38;&#x60C5;&#x51B5;&#xFF0C;&#x6CA1;&#x6709;&#x51FA;&#x9519;&#x3002;&#x7B2C;&#x4E8C;&#x4E2A;&#x51FD;&#x6570;&#x867D;&#x7136;&#x662F;&#x5F02;&#x6B65;&#x8C03;&#x7528;&#xFF0C;&#x4F46;&#x88AB;&#x540C;&#x6B65;&#x6267;&#x884C;&#x3002;&#x6240;&#x4EE5;&#x7B2C;&#x4E09;&#x4E2A;&#x51FD;&#x6570;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x5DF2;&#x7ECF;&#x8FC7;&#x4E86;3&#x79D2;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// 1.1</span>
<span class="token keyword">var</span> count1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">whilst</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> count1 <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 count: &apos;</span><span class="token punctuation">,</span> count1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        count1<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>cb<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// 3s have passed</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.1 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//10.318&gt; 1.1 count: 0</span>
<span class="token comment" spellcheck="true">//11.330&gt; 1.1 count: 1</span>
<span class="token comment" spellcheck="true">//12.342&gt; 1.1 count: 2</span>
<span class="token comment" spellcheck="true">//13.356&gt; 1.1 err:</span>


<span class="token comment" spellcheck="true">/**
* &#x4E2D;&#x9014;&#x51FA;&#x9519;&#x3002;&#x51FA;&#x9519;&#x540E;&#x7ACB;&#x523B;&#x8C03;&#x7528;&#x7B2C;&#x4E09;&#x4E2A;&#x51FD;&#x6570;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// 1.2</span>
<span class="token keyword">var</span> count2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">whilst</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> count2 <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 count: &apos;</span><span class="token punctuation">,</span> count2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>count2<span class="token operator">===</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            t<span class="token punctuation">.</span><span class="token function">err</span><span class="token punctuation">(</span><span class="token string">&apos;myerr&apos;</span><span class="token punctuation">,</span> cb<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            count2<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span>cb<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// 2s have passed</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.2 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//12.805&gt; 1.2 count: 0</span>
<span class="token comment" spellcheck="true">//13.824&gt; 1.2 count: 1</span>
<span class="token comment" spellcheck="true">//14.026&gt; 1.2 err: myerr</span>

<span class="token comment" spellcheck="true">/**
* &#x7B2C;&#x4E8C;&#x4E2A;&#x51FD;&#x6570;&#x5373;&#x4F7F;&#x4EA7;&#x751F;&#x503C;&#xFF0C;&#x4E5F;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;&#x7B2C;&#x4E09;&#x4E2A;&#x51FD;&#x6570;&#x53EA;&#x80FD;&#x5F97;&#x5230;err&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// 1.3</span>
<span class="token keyword">var</span> count3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">whilst</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> count3 <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 count: &apos;</span><span class="token punctuation">,</span> count3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span>count3<span class="token operator">++</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// result&#x6CA1;&#x6709;&#x7528;</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.3 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//45.311&gt; 1.3 count: 0</span>
<span class="token comment" spellcheck="true">//45.514&gt; 1.3 count: 1</span>
<span class="token comment" spellcheck="true">//45.718&gt; 1.3 count: 2</span>
<span class="token comment" spellcheck="true">//45.920&gt; 1.3 err:</span>
<span class="token comment" spellcheck="true">//45.923&gt; 1.3 result:</span>

<span class="token comment" spellcheck="true">/**
*  doWhilst&#x4EA4;&#x6362;&#x4E86;fn,test&#x7684;&#x53C2;&#x6570;&#x4F4D;&#x7F6E;&#xFF0C;&#x5148;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#xFF0C;&#x518D;&#x505A;test&#x5224;&#x65AD;&#x3002; &#x548C;javascript&#x4E2D;do..while&#x8BED;&#x6CD5;&#x4E00;&#x81F4;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// doWhilst(fn, test, callback)</span>
<span class="token comment" spellcheck="true">//1.4</span>
<span class="token keyword">var</span> count4 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">doWhilst</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 count: &apos;</span><span class="token punctuation">,</span> count4<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span>count4<span class="token operator">++</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1.4 test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> count4 <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// result&#x6CA1;&#x6709;&#x7528;</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 err: &apos;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.4 result: &apos;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//33.643&gt; 1.4 count: 0</span>
<span class="token comment" spellcheck="true">//33.848&gt; 1.4 test</span>
<span class="token comment" spellcheck="true">//33.850&gt; 1.4 count: 1</span>
<span class="token comment" spellcheck="true">//34.054&gt; 1.4 test</span>
<span class="token comment" spellcheck="true">//34.057&gt; 1.4 count: 2</span>
<span class="token comment" spellcheck="true">//34.269&gt; 1.4 test</span>
<span class="token comment" spellcheck="true">//34.270&gt; 1.4 err:</span>
<span class="token comment" spellcheck="true">//34.270&gt; 1.4 result:</span>

<span class="token comment" spellcheck="true">/**
* until&#x4E0E;whilst&#x6B63;&#x597D;&#x76F8;&#x53CD;&#xFF0C;&#x5F53;test&#x4E3A;false&#x65F6;&#x5FAA;&#x73AF;&#xFF0C;&#x4E0E;true&#x65F6;&#x8DF3;&#x51FA;&#x3002;&#x5176;&#x5B83;&#x7279;&#x6027;&#x4E00;&#x81F4;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// 1.5</span>
<span class="token keyword">var</span> count5 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">until</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> count5<span class="token operator">&gt;</span><span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 count: &apos;</span><span class="token punctuation">,</span> count5<span class="token punctuation">)</span><span class="token punctuation">;</span>
        count5<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>cb<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// 4s have passed</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.5 err: &apos;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//42.498&gt; 1.5 count: 0</span>
<span class="token comment" spellcheck="true">//42.701&gt; 1.5 count: 1</span>
<span class="token comment" spellcheck="true">//42.905&gt; 1.5 count: 2</span>
<span class="token comment" spellcheck="true">//43.107&gt; 1.5 count: 3</span>
<span class="token comment" spellcheck="true">//43.313&gt; 1.5 err:</span>

<span class="token comment" spellcheck="true">/**
* doUntil&#x4E0E;doWhilst&#x6B63;&#x597D;&#x76F8;&#x53CD;&#xFF0C;&#x5F53;test&#x4E3A;false&#x65F6;&#x5FAA;&#x73AF;&#xFF0C;&#x4E0E;true&#x65F6;&#x8DF3;&#x51FA;&#x3002;&#x5176;&#x5B83;&#x7279;&#x6027;&#x4E00;&#x81F4;&#x3002;
*/</span>
<span class="token comment" spellcheck="true">// doUntil(fn, test, callback)</span>
<span class="token comment" spellcheck="true">// 1.6</span>
<span class="token keyword">var</span> count6 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">doUntil</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.6 count: &apos;</span><span class="token punctuation">,</span> count6<span class="token punctuation">)</span><span class="token punctuation">;</span>
        count6<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>cb<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.6 test&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> count6<span class="token operator">&gt;</span><span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// 4s have passed</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.6 err: &apos;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//41.831&gt; 1.6 count: 0</span>
<span class="token comment" spellcheck="true">//42.035&gt; 1.6 test</span>
<span class="token comment" spellcheck="true">//42.037&gt; 1.6 count: 1</span>
<span class="token comment" spellcheck="true">//42.241&gt; 1.6 test</span>
<span class="token comment" spellcheck="true">//42.244&gt; 1.6 count: 2</span>
<span class="token comment" spellcheck="true">//42.456&gt; 1.6 test</span>
<span class="token comment" spellcheck="true">//42.457&gt; 1.6 count: 3</span>
<span class="token comment" spellcheck="true">//42.660&gt; 1.6 test</span>
<span class="token comment" spellcheck="true">//42.661&gt; 1.6 err:</span>

<span class="token comment" spellcheck="true">/**
 * forever&#xFF0C;&#x65E0;&#x8BBA;&#x6761;&#x4EF6;&#x5FAA;&#x73AF;&#x6267;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x51FA;&#x9519;&#xFF0C;callback&#x6C38;&#x8FDC;&#x4E0D;&#x88AB;&#x6267;&#x884C;
 */</span>
<span class="token comment" spellcheck="true">//forever(fn, callback)</span>
<span class="token comment" spellcheck="true">//1.7</span>
<span class="token keyword">var</span> count7 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">async</span><span class="token punctuation">.</span><span class="token function">forever</span><span class="token punctuation">(</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.7 count: &apos;</span><span class="token punctuation">,</span> count7<span class="token punctuation">)</span><span class="token punctuation">;</span>
        count7<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>cb<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;1.7 err: &apos;</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//52.770&gt; 1.7 count: 0</span>
<span class="token comment" spellcheck="true">//52.973&gt; 1.7 count: 1</span>
<span class="token comment" spellcheck="true">//53.175&gt; 1.7 count: 2</span>
<span class="token comment" spellcheck="true">//53.377&gt; 1.7 count: 3</span>
<span class="token comment" spellcheck="true">//53.583&gt; 1.7 count: 4</span>
<span class="token comment" spellcheck="true">//53.785&gt; 1.7 count: 5</span>
<span class="token comment" spellcheck="true">//53.987&gt; 1.7 count: 6</span>
<span class="token comment" spellcheck="true">//54.189&gt; 1.7 count: 7</span>
<span class="token comment" spellcheck="true">//54.391&gt; 1.7 count: 8</span>
<span class="token comment" spellcheck="true">//54.593&gt; 1.7 count: 9</span>
<span class="token comment" spellcheck="true">//54.795&gt; 1.7 count: 10</span>
<span class="token comment" spellcheck="true">//54.997&gt; 1.7 count: 11</span>
<span class="token comment" spellcheck="true">//55.199&gt; 1.7 count: 12</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

          </div>

          <!-- Sources & Tags -->
<div class="g-mb-30">
  <h6 class="g-color-gray-dark-v1 g-mb-15">

    

                <strong class="g-mr-5">专栏:</strong> <a class="u-link-v5 g-color-gray-dark-v4 g-color-primary--hover" href="/categories/服务器/">服务器</a>
      

        </h6>
  <h6 class="g-color-gray-dark-v1">
          <strong class="g-mr-5">标签:</strong>

          
              <a class="u-tags-v1 g-font-size-12 g-brd-around g-brd-gray-light-v4 g-bg-primary--hover g-brd-primary--hover g-color-black-opacity-0_8 g-color-white--hover rounded g-py-6 g-px-15 g-mr-5" href="/tags/nodejs/">nodejs</a>
            
              <a class="u-tags-v1 g-font-size-12 g-brd-around g-brd-gray-light-v4 g-bg-primary--hover g-brd-primary--hover g-color-black-opacity-0_8 g-color-white--hover rounded g-py-6 g-px-15 g-mr-5" href="/tags/async/">async</a>
            
        </h6>
</div>
<!-- End Sources & Tags -->


          <hr class="g-brd-gray-light-v4">

          <!-- Social Shares -->
<div class="g-mb-30">

    <ul class="list-inline text-uppercase mb-0">
      <li class="list-inline-item g-mr-10">
        <strong class="align-middle g-font-size-24 jiathis_counter_style"><a class="jiathis_counter_style"></a></strong>
      </li>
      <li class="list-inline-item g-mr-10">
        <span class="g-color-gray-dark-v5">|</span>
      </li>
      <li class="list-inline-item g-mr-10">
        <a class="jiathis_button_weixin btn u-btn-teal g-font-size-12 rounded g-px-20--sm g-py-10" style="color:white;">
          <i class="fa fa-wechat g-mr-5--sm"></i>
          <span class="g-hidden-xs-down">分享到微信</span>
      </a>
      </li>
      <li class="list-inline-item g-mr-10">
        <a class="jiathis_button_tqq btn u-btn-twitter g-font-size-12 rounded g-px-20--sm g-py-10" href="#">
              <i class="fa fa-qq g-mr-5--sm"></i> <span class="g-hidden-xs-down">分享到 QQ</span>
            </a>
      </li>
      <li class="list-inline-item g-mr-10">
        <a class="jiathis_button_tsina btn u-btn-lightred g-font-size-12 rounded g-px-20--sm g-py-10 " href="#">
              <i class="fa fa-weibo g-mr-5--sm"></i> <span class="g-hidden-xs-down">分享到 新浪微博</span>
            </a>
      </li>
    </ul>
</div>
          <script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js" charset="utf-8"></script>
<!-- End Social Shares -->



          <div class="g-mb-60">
  <!-- UY BEGIN -->
  <div id="uyan_frame"></div>
  <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1821358"></script>
  <!-- UY END -->
</div>


        </article>

        <div id="stickyblock-end"></div>
      </div>
      <!-- End Articles Content -->

      <!-- Sidebar -->
      <div class="col-lg-3">

        
        <!-- Social Links -->
        <div class="g-mb-50">
          <div class="u-heading-v3-1 g-mb-30">
            <h2 class="h5 u-heading-v3__title g-color-gray-dark-v1 text-uppercase g-brd-primary">最热专题</h2>
          </div>

          <ul class="list-unstyled mb-0">

            

              <li class="d-flex align-items-center justify-content-between g-mb-20">
                <a class="d-flex align-items-center u-link-v5 g-color-gray-dark-v1" href="#">
                        <span class="u-icon-v3 u-icon-size--xs u-shadow-v25 g-font-size-12 g-bg-facebook g-bg-facebook--hover g-color-white rounded-circle g-mr-10" href="#">
                          <i class="fa fa-code"></i>
                        </span>
                        IOS
                      </a>
                <span class="js-counter d-block g-color-gray-dark-v4">15</span>
              </li>

              

              <li class="d-flex align-items-center justify-content-between g-mb-20">
                <a class="d-flex align-items-center u-link-v5 g-color-gray-dark-v1" href="#">
                        <span class="u-icon-v3 u-icon-size--xs u-shadow-v25 g-font-size-12 g-bg-facebook g-bg-facebook--hover g-color-white rounded-circle g-mr-10" href="#">
                          <i class="fa fa-code"></i>
                        </span>
                        服务器
                      </a>
                <span class="js-counter d-block g-color-gray-dark-v4">4</span>
              </li>

              

              <li class="d-flex align-items-center justify-content-between g-mb-20">
                <a class="d-flex align-items-center u-link-v5 g-color-gray-dark-v1" href="#">
                        <span class="u-icon-v3 u-icon-size--xs u-shadow-v25 g-font-size-12 g-bg-facebook g-bg-facebook--hover g-color-white rounded-circle g-mr-10" href="#">
                          <i class="fa fa-code"></i>
                        </span>
                        开发帮助
                      </a>
                <span class="js-counter d-block g-color-gray-dark-v4">3</span>
              </li>

              

              <li class="d-flex align-items-center justify-content-between g-mb-20">
                <a class="d-flex align-items-center u-link-v5 g-color-gray-dark-v1" href="#">
                        <span class="u-icon-v3 u-icon-size--xs u-shadow-v25 g-font-size-12 g-bg-facebook g-bg-facebook--hover g-color-white rounded-circle g-mr-10" href="#">
                          <i class="fa fa-code"></i>
                        </span>
                        牢骚
                      </a>
                <span class="js-counter d-block g-color-gray-dark-v4">1</span>
              </li>

              

              <li class="d-flex align-items-center justify-content-between g-mb-20">
                <a class="d-flex align-items-center u-link-v5 g-color-gray-dark-v1" href="#">
                        <span class="u-icon-v3 u-icon-size--xs u-shadow-v25 g-font-size-12 g-bg-facebook g-bg-facebook--hover g-color-white rounded-circle g-mr-10" href="#">
                          <i class="fa fa-code"></i>
                        </span>
                        Web 前端
                      </a>
                <span class="js-counter d-block g-color-gray-dark-v4">1</span>
              </li>

              
          </ul>
        </div>
        <!-- End Social Links -->


        <div id="stickyblock-start" class="js-sticky-block g-sticky-block--lg g-pt-20" data-start-point="#stickyblock-start" data-end-point="#stickyblock-end" style="top: 0px; width: 255px; height: 957px;">

  <div class="g-mb-40">





      <!-- News Feed -->
<div class="g-mb-40">
  <div class="u-heading-v3-1 g-mb-30">
    <h2 class="h5 u-heading-v3__title g-color-gray-dark-v1 text-uppercase g-brd-primary">最新日志</h2>
  </div>


  

    <!-- Article -->
    <article>
      <h3 class="h6">
              <a class="g-color-gray-dark-v1" href="/2017/11/23/生活随处可见一斑20171123/">天通苑地铁 安检方式改变</a>
            </h3>

              <span class="g-font-size-12">
                      2017/11/23 9:18:0
                    </span>
    </article>
    <!-- End Article -->

    
    <hr class="g-brd-gray-light-v4 g-mt-15 g-mb-10">
    

  

    <!-- Article -->
    <article>
      <h3 class="h6">
              <a class="g-color-gray-dark-v1" href="/2017/11/22/使用 NodeJS APNS 给你的应用发消息/">使用 NodeJS APNS 给你的应用发消息</a>
            </h3>

              <span class="g-font-size-12">
                      2017/11/22 17:2:0
                    </span>
    </article>
    <!-- End Article -->

    
    <hr class="g-brd-gray-light-v4 g-mt-15 g-mb-10">
    

  

    <!-- Article -->
    <article>
      <h3 class="h6">
              <a class="g-color-gray-dark-v1" href="/2017/11/16/IOS10前 UITextFiled 的 placeholder 的问题/">IOS10前 UITextFiled 的 placeholder 的问题</a>
            </h3>

              <span class="g-font-size-12">
                      2017/11/16 1:16:0
                    </span>
    </article>
    <!-- End Article -->

    
    <hr class="g-brd-gray-light-v4 g-mt-15 g-mb-10">
    

  

    <!-- Article -->
    <article>
      <h3 class="h6">
              <a class="g-color-gray-dark-v1" href="/2017/10/26/WebView 与 Html Input Bug/">WebView 与 Html Input File 以及 Upload File 出现的问题</a>
            </h3>

              <span class="g-font-size-12">
                      2017/10/26 4:10:0
                    </span>
    </article>
    <!-- End Article -->

    

  

</div>
<!-- End News Feed -->



</div>


      </div>
      <!-- End Sidebar -->
    </div>
  </div>
</section>

<script src="/assets/js/components/hs.sticky-block.js"></script>
<script type="text/javascript">

    $(window).on('load', function () {
      // initialization of sticky blocks
      $.HSCore.components.HSStickyBlock.init('.js-sticky-block');
    });

</script>


      <!-- JS Implementing Plugins -->
<script src="/assets/vendor/custombox/custombox.min.js"></script>

<!-- JS Unify -->
<script src="/assets/js/components/hs.modal-window.js"></script>


<!-- Footer -->
<footer class="g-bg-black-opacity-0_9 g-color-white-opacity-0_8 ">
  <br><br><br>
  <div class="container g-mb-60">
    <div class="row">

      <!-- Footer Content -->
<div class="col-lg-3 col-md-6 g-mb-40 g-mb-0--lg">
  <div class="u-heading-v2-3--bottom g-brd-white-opacity-0_8 g-mb-20">
    <h2 class="u-heading-v2__title h6 text-uppercase mb-0">关于我</h2>
  </div>

  <div class="g-mb-30">
    <p class="g-color-white-opacity-0_8">努力学习的IOS程序员。目前在学习制作Hexo主题，主要还是为了做自己的一个博客.之后会好好学习linux以及服务器相关的知识.</p>
  </div>

  <address class="mb-0">
    <div class="g-mb-30">
      <h4 class="h6 g-font-weight-600">现居地</h4>
      <p class="mb-0 g-color-white-opacity-0_8">北京 - 国家的首都 </p>
    </div>

    <!-- 配置标签相关视图 -->
    

      <div class="g-mb-30">
        <h4 class="h6 g-font-weight-600">邮箱:</h4>

        

                <p class="mb-0 g-color-white-opacity-0_8">alphabetion@gmail.com</p>
        

                <p class="mb-0 g-color-white-opacity-0_8">jingwenzheng@baimaodai.com</p>
        

      </div>

      



    <div class="mb-0">
      <h4 class="h6 g-font-weight-600">一言:</h4>
      <p class="mb-0">
        <a class="g-color-white-opacity-0_8" id="hitokoto" href="http://hitokoto.cn/">support@htmlstream.com</a>
      </p>
    </div>
  </address>
</div>
<!-- End Footer Content -->


        <!-- Footer Content -->
<div class="col-lg-3 col-md-6 g-mb-40 g-mb-0--lg">


  <!-- 配置标签相关视图 -->
  
    <div class="u-heading-v2-3--bottom g-brd-white-opacity-0_8 g-mb-20">
      <h2 class="u-heading-v2__title h6 text-uppercase mb-0">标签</h2>
    </div>
    <ul class="u-list-inline g-font-size-12 g-mb-30">

      
        <li class="list-inline-item g-mb-10">
          <a class="u-tags-v1 g-brd-around g-brd-white-opacity-0_1 g-bg-primary--hover g-brd-primary--hover g-color-white-opacity-0_8 g-rounded-50 g-py-4 g-px-15" href="/tags/生活/">
            生活
          </a>
        </li>
        
        <li class="list-inline-item g-mb-10">
          <a class="u-tags-v1 g-brd-around g-brd-white-opacity-0_1 g-bg-primary--hover g-brd-primary--hover g-color-white-opacity-0_8 g-rounded-50 g-py-4 g-px-15" href="/tags/悲观/">
            悲观
          </a>
        </li>
        
        <li class="list-inline-item g-mb-10">
          <a class="u-tags-v1 g-brd-around g-brd-white-opacity-0_1 g-bg-primary--hover g-brd-primary--hover g-color-white-opacity-0_8 g-rounded-50 g-py-4 g-px-15" href="/tags/Objective-C/">
            Objective-C
          </a>
        </li>
        
        <li class="list-inline-item g-mb-10">
          <a class="u-tags-v1 g-brd-around g-brd-white-opacity-0_1 g-bg-primary--hover g-brd-primary--hover g-color-white-opacity-0_8 g-rounded-50 g-py-4 g-px-15" href="/tags/AsyncDisplayKit/">
            AsyncDisplayKit
          </a>
        </li>
        
        <li class="list-inline-item g-mb-10">
          <a class="u-tags-v1 g-brd-around g-brd-white-opacity-0_1 g-bg-primary--hover g-brd-primary--hover g-color-white-opacity-0_8 g-rounded-50 g-py-4 g-px-15" href="/tags/ios/">
            ios
          </a>
        </li>
        
        <li class="list-inline-item g-mb-10">
          <a class="u-tags-v1 g-brd-around g-brd-white-opacity-0_1 g-bg-primary--hover g-brd-primary--hover g-color-white-opacity-0_8 g-rounded-50 g-py-4 g-px-15" href="/tags/约束教程/">
            约束教程
          </a>
        </li>
        
        <li class="list-inline-item g-mb-10">
          <a class="u-tags-v1 g-brd-around g-brd-white-opacity-0_1 g-bg-primary--hover g-brd-primary--hover g-color-white-opacity-0_8 g-rounded-50 g-py-4 g-px-15" href="/tags/swift/">
            swift
          </a>
        </li>
        
        <li class="list-inline-item g-mb-10">
          <a class="u-tags-v1 g-brd-around g-brd-white-opacity-0_1 g-bg-primary--hover g-brd-primary--hover g-color-white-opacity-0_8 g-rounded-50 g-py-4 g-px-15" href="/tags/autolayout/">
            autolayout
          </a>
        </li>
        
    </ul>
    

      <!-- 布局相关链接-->

      <div class="u-heading-v2-3--bottom g-brd-white-opacity-0_8 g-mb-20">
        <h2 class="u-heading-v2__title h6 text-uppercase mb-0">友情链接</h2>
      </div>

      <ul class="list-unstyled">
        

          <li class="g-mb-5">
            <i class="fa fa-angle-right g-mr-5"></i>

            <a class="g-color-white-opacity-0_8" href="https://baidu.com">
              百度
            </a>
          </li>

          

          <li class="g-mb-5">
            <i class="fa fa-angle-right g-mr-5"></i>

            <a class="g-color-white-opacity-0_8" href="https://test.baidu.com">
              测试链接
            </a>
          </li>

          

          <li class="g-mb-5">
            <i class="fa fa-angle-right g-mr-5"></i>

            <a class="g-color-white-opacity-0_8" href="https://baidu.com">
              hexo
            </a>
          </li>

          
      </ul>



</div>
<!-- End Footer Content -->


          <!-- Footer Content -->
<div class="col-lg-3 col-md-6 g-mb-40 g-mb-0--lg">
  <div class="u-heading-v2-3--bottom g-brd-white-opacity-0_8 g-mb-20">
    <h2 class="u-heading-v2__title h6 text-uppercase mb-0">最近文章</h2>
  </div>

  
    

  <article class="media">


  









    <div class="media-body">
      <h3 class="h6">
            <a class="g-color-white-opacity-0_8 g-color-white--hover" href="/2017/11/23/生活随处可见一斑20171123/">天通苑地铁 安检方式改变</a>
      </h3>
      <ul class="u-list-inline g-font-size-12">
        <li class="list-inline-item">
          2017/11/23 9:18:0
        </li>
        <li class="list-inline-item">/</li>
        <li class="list-inline-item">
          <a class="u-link-v5 g-color-white-opacity-0_8 g-color-white--hover" href="/2017/11/23/生活随处可见一斑20171123/">
                <i class="fa fa-comments-o"></i>
                12
              </a>
        </li>
      </ul>
    </div>
  </article>


  <hr class="g-brd-white-opacity-0_1 g-mt-20 g-mb-15">


  

  <article class="media">


  




  <a class="d-flex g-mt-3 mr-3" href="/2017/11/22/使用 NodeJS APNS 给你的应用发消息/">
    <img class="g-width-60 g-height-60 rounded" src="http://image.msiter.com/stock-photo-236362221.jpg" alt="Image Description">
  </a>








    <div class="media-body">
      <h3 class="h6">
            <a class="g-color-white-opacity-0_8 g-color-white--hover" href="/2017/11/22/使用 NodeJS APNS 给你的应用发消息/">使用 NodeJS APNS 给你的应用发消息</a>
      </h3>
      <ul class="u-list-inline g-font-size-12">
        <li class="list-inline-item">
          2017/11/22 17:2:0
        </li>
        <li class="list-inline-item">/</li>
        <li class="list-inline-item">
          <a class="u-link-v5 g-color-white-opacity-0_8 g-color-white--hover" href="/2017/11/22/使用 NodeJS APNS 给你的应用发消息/">
                <i class="fa fa-comments-o"></i>
                12
              </a>
        </li>
      </ul>
    </div>
  </article>


  <hr class="g-brd-white-opacity-0_1 g-mt-20 g-mb-15">


  

  <article class="media">


  









    <div class="media-body">
      <h3 class="h6">
            <a class="g-color-white-opacity-0_8 g-color-white--hover" href="/2017/11/16/IOS10前 UITextFiled 的 placeholder 的问题/">IOS10前 UITextFiled 的 placeholder 的问题</a>
      </h3>
      <ul class="u-list-inline g-font-size-12">
        <li class="list-inline-item">
          2017/11/16 1:16:0
        </li>
        <li class="list-inline-item">/</li>
        <li class="list-inline-item">
          <a class="u-link-v5 g-color-white-opacity-0_8 g-color-white--hover" href="/2017/11/16/IOS10前 UITextFiled 的 placeholder 的问题/">
                <i class="fa fa-comments-o"></i>
                12
              </a>
        </li>
      </ul>
    </div>
  </article>


  <hr class="g-brd-white-opacity-0_1 g-mt-20 g-mb-15">


  

  <article class="media">


  




  <a class="d-flex g-mt-3 mr-3" href="/2017/10/26/WebView 与 Html Input Bug/">
    <img class="g-width-60 g-height-60 rounded" src="http://image.msiter.com/stock-photo-233150091.jpg" alt="Image Description">
  </a>








    <div class="media-body">
      <h3 class="h6">
            <a class="g-color-white-opacity-0_8 g-color-white--hover" href="/2017/10/26/WebView 与 Html Input Bug/">WebView 与 Html Input File 以及 Upload File 出现的问题</a>
      </h3>
      <ul class="u-list-inline g-font-size-12">
        <li class="list-inline-item">
          2017/10/26 4:10:0
        </li>
        <li class="list-inline-item">/</li>
        <li class="list-inline-item">
          <a class="u-link-v5 g-color-white-opacity-0_8 g-color-white--hover" href="/2017/10/26/WebView 与 Html Input Bug/">
                <i class="fa fa-comments-o"></i>
                12
              </a>
        </li>
      </ul>
    </div>
  </article>


  <hr class="g-brd-white-opacity-0_1 g-mt-20 g-mb-15">


  

      
</div>
<!-- End Footer Content -->


            <!-- Footer Content -->
<div class="col-lg-3 col-md-6">
  <div class="u-heading-v2-3--bottom g-brd-white-opacity-0_8 g-mb-20">
    <h2 class="u-heading-v2__title h6 text-uppercase mb-0">订阅</h2>
  </div>

  <div class="g-mb-30">
    <p class="g-color-white-opacity-0_8">订阅我可以更及时的获取到文章的推送，请在下方输入您的邮箱地址获取文章更新</p>
    <div class="input-group border-0 g-rounded-30">
      <input class="form-control border-0 g-rounded-left-30 g-px-12 g-py-8" type="email" placeholder="输入您的邮箱地址">
      <div class="input-group-addon border-0 p-0">
        <button class="btn u-btn-primary g-rounded-right-30 g-px-12 g-py-8" type="submit" role="button">订阅</button>
      </div>
    </div>
  </div>

  <div class="u-heading-v2-3--bottom g-brd-white-opacity-0_8 g-mb-20">
    <h2 class="u-heading-v2__title h6 text-uppercase mb-0">社交</h2>
  </div>

  <p class="g-color-white-opacity-0_8">作为一个宅男，长期宅在家里，会不定期的更新文章。如果你想更新的了解到我的动态，请选择一下任意一种社交方式关注我。</p>
  <ul class="list-inline mb-0">
    <li class="list-inline-item g-mr-10">
      <a class="u-icon-v3 u-icon-size--xs g-bg-white-opacity-0_1 g-bg-white-opacity-0_2--hover g-color-white-opacity-0_6 rounded" href="https://www.facebook.com/aimobier">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li class="list-inline-item g-mr-10">
      <a class="u-icon-v3 u-icon-size--xs g-bg-white-opacity-0_1 g-bg-white-opacity-0_2--hover g-color-white-opacity-0_6 rounded" href="https://www.instagram.com/aimobier/">
        <i class="fa fa-instagram"></i>
      </a>
    </li>
    <li class="list-inline-item g-mr-10">
      <a class="u-icon-v3 u-icon-size--xs g-bg-white-opacity-0_1 g-bg-white-opacity-0_2--hover g-color-white-opacity-0_6 rounded" href="https://github.com/aimobier">
        <i class="fa fa-github"></i>
      </a>
    </li>
    <li class="list-inline-item g-mr-10">
      <a class="u-icon-v3 u-icon-size--xs g-bg-white-opacity-0_1 g-bg-white-opacity-0_2--hover g-color-white-opacity-0_6 rounded" href="http://weibo.com/aouns">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li class="list-inline-item g-mr-10">
      <a class="u-icon-v3 u-icon-size--xs g-bg-white-opacity-0_1 g-bg-white-opacity-0_2--hover g-color-white-opacity-0_6 rounded" href="#modal1" data-modal-target="#modal1" data-modal-effect="fadein">
        <i class="fa fa-weixin"></i>
</a>
    </li>
  </ul>
</div>
<!-- End Footer Content -->

    </div>
  </div>


  <!-- Copyright Footer -->
<div class="g-bg-black-opacity-0_1 g-color-white-opacity-0_8 text-center g-py-20">
  <div class="container">
    
      
        
        <small class="g-font-size-7 g-mr-10 g-mb-10 g-mb-0--md">2015 - 2017 © All Rights Reserved. Msiter by
        <a class="g-color-white-opacity-0_8" href="#">Jing WenZheng</a>
      </small>
  </div>
</div>
<!-- End Copyright Footer -->


</footer>
<!-- End Footer -->
<a class="js-go-to u-go-to-v1" href="#" data-type="fixed" data-position='{
 "bottom": 15,
 "right": 15
}' data-offset-top="400" data-compensation="#js-header" data-show-effect="zoomIn">
  <i class="hs-icon hs-icon-arrow-top"></i>
</a>

<script type="text/javascript">
  $(function() {

    // initialization of go to
    $.HSCore.components.HSGoTo.init('.js-go-to');
    $.HSCore.components.HSModalWindow.init('[data-modal-target]');
    $.getJSON("https://sslapi.hitokoto.cn/?encode=json", function(json) {
      $("#hitokoto").html(json["hitokoto"]);
    });
  });
</script>


    </main>

    <div class="u-outer-spaces-helper"></div>


  </body>
</html>
